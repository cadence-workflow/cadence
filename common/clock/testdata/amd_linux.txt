// On a giant cloud AMD linux machine with 96 cores (shared machine, possibly noisy but I tried to pick a quiet period):

❯ go test -bench . -test.run xxx -cpu 1,2,4,8,32,128 .
goos: linux
goarch: amd64
pkg: github.com/uber/cadence/common/clock
cpu: AMD EPYC 7B13
BenchmarkLimiter/allow/serial/real             	10455768	       114.1 ns/op
--- BENCH: BenchmarkLimiter/allow/serial/real
    ratelimiter_test.go:104: allowed: 1,          denied: 0,           time per allow:   42.86µs
    ratelimiter_test.go:104: allowed: 100,        denied: 0,           time per allow:     338ns
    ratelimiter_test.go:104: allowed: 2145,       denied: 7855,        time per allow:     536ns
    ratelimiter_test.go:104: allowed: 115704,     denied: 884296,      time per allow:     991ns
    ratelimiter_test.go:104: allowed: 1193894,    denied: 9261874,     time per allow:     999ns
BenchmarkLimiter/allow/serial/real-2           	10568656	       113.8 ns/op
--- BENCH: BenchmarkLimiter/allow/serial/real-2
    ratelimiter_test.go:104: allowed: 1,          denied: 0,           time per allow:   20.34µs
    ratelimiter_test.go:104: allowed: 100,        denied: 0,           time per allow:     404ns
    ratelimiter_test.go:104: allowed: 2166,       denied: 7834,        time per allow:     542ns
    ratelimiter_test.go:104: allowed: 114483,     denied: 885517,      time per allow:     991ns
    ratelimiter_test.go:104: allowed: 1203481,    denied: 9365175,     time per allow:     999ns
BenchmarkLimiter/allow/serial/real-4           	10537750	       113.4 ns/op
--- BENCH: BenchmarkLimiter/allow/serial/real-4
    ratelimiter_test.go:104: allowed: 1,          denied: 0,           time per allow:  42.311µs
    ratelimiter_test.go:104: allowed: 100,        denied: 0,           time per allow:     313ns
    ratelimiter_test.go:104: allowed: 2341,       denied: 7659,        time per allow:     581ns
    ratelimiter_test.go:104: allowed: 114804,     denied: 885196,      time per allow:     991ns
    ratelimiter_test.go:104: allowed: 1195993,    denied: 9341757,     time per allow:     999ns
BenchmarkLimiter/allow/serial/real-8           	10590476	       113.9 ns/op
--- BENCH: BenchmarkLimiter/allow/serial/real-8
    ratelimiter_test.go:104: allowed: 1,          denied: 0,           time per allow:   28.39µs
    ratelimiter_test.go:104: allowed: 100,        denied: 0,           time per allow:     239ns
    ratelimiter_test.go:104: allowed: 2352,       denied: 7648,        time per allow:     577ns
    ratelimiter_test.go:104: allowed: 114247,     denied: 885753,      time per allow:     991ns
    ratelimiter_test.go:104: allowed: 1207441,    denied: 9383035,     time per allow:     999ns
BenchmarkLimiter/allow/serial/real-32          	10339393	       113.5 ns/op
--- BENCH: BenchmarkLimiter/allow/serial/real-32
    ratelimiter_test.go:104: allowed: 1,          denied: 0,           time per allow:   43.09µs
    ratelimiter_test.go:104: allowed: 100,        denied: 0,           time per allow:     470ns
    ratelimiter_test.go:104: allowed: 2144,       denied: 7856,        time per allow:     538ns
    ratelimiter_test.go:104: allowed: 116961,     denied: 883039,      time per allow:     991ns
    ratelimiter_test.go:104: allowed: 1174923,    denied: 9164470,     time per allow:     999ns
BenchmarkLimiter/allow/serial/real-128         	10593596	       113.6 ns/op
--- BENCH: BenchmarkLimiter/allow/serial/real-128
    ratelimiter_test.go:104: allowed: 1,          denied: 0,           time per allow:   33.35µs
    ratelimiter_test.go:104: allowed: 100,        denied: 0,           time per allow:     398ns
    ratelimiter_test.go:104: allowed: 2151,       denied: 7849,        time per allow:     543ns
    ratelimiter_test.go:104: allowed: 114208,     denied: 885792,      time per allow:     991ns
    ratelimiter_test.go:104: allowed: 1204417,    denied: 9389179,     time per allow:     999ns
BenchmarkLimiter/allow/serial/wrapped          	 7510166	       161.3 ns/op
--- BENCH: BenchmarkLimiter/allow/serial/wrapped
    ratelimiter_test.go:104: allowed: 1,          denied: 0,           time per allow:   42.88µs
    ratelimiter_test.go:104: allowed: 100,        denied: 0,           time per allow:     267ns
    ratelimiter_test.go:104: allowed: 2586,       denied: 7414,        time per allow:     615ns
    ratelimiter_test.go:104: allowed: 160746,     denied: 839254,      time per allow:     993ns
    ratelimiter_test.go:104: allowed: 1212393,    denied: 6297773,     time per allow:     999ns
BenchmarkLimiter/allow/serial/wrapped-2        	 7632099	       155.9 ns/op
--- BENCH: BenchmarkLimiter/allow/serial/wrapped-2
    ratelimiter_test.go:104: allowed: 1,          denied: 0,           time per allow:   18.73µs
    ratelimiter_test.go:104: allowed: 100,        denied: 0,           time per allow:     519ns
    ratelimiter_test.go:104: allowed: 2539,       denied: 7461,        time per allow:     609ns
    ratelimiter_test.go:104: allowed: 158187,     denied: 841813,      time per allow:     993ns
    ratelimiter_test.go:104: allowed: 1190941,    denied: 6441158,     time per allow:     999ns
BenchmarkLimiter/allow/serial/wrapped-4        	 7061148	       155.3 ns/op
--- BENCH: BenchmarkLimiter/allow/serial/wrapped-4
    ratelimiter_test.go:104: allowed: 1,          denied: 0,           time per allow:   31.82µs
    ratelimiter_test.go:104: allowed: 100,        denied: 0,           time per allow:     477ns
    ratelimiter_test.go:104: allowed: 2691,       denied: 7309,        time per allow:     639ns
    ratelimiter_test.go:104: allowed: 170900,     denied: 829100,      time per allow:     994ns
    ratelimiter_test.go:104: allowed: 1097714,    denied: 5963434,     time per allow:     999ns
BenchmarkLimiter/allow/serial/wrapped-8        	 7651126	       157.5 ns/op
--- BENCH: BenchmarkLimiter/allow/serial/wrapped-8
    ratelimiter_test.go:104: allowed: 1,          denied: 0,           time per allow:   29.54µs
    ratelimiter_test.go:104: allowed: 100,        denied: 0,           time per allow:     449ns
    ratelimiter_test.go:104: allowed: 2824,       denied: 7176,        time per allow:     656ns
    ratelimiter_test.go:104: allowed: 157798,     denied: 842202,      time per allow:     993ns
    ratelimiter_test.go:104: allowed: 1205819,    denied: 6445307,     time per allow:     999ns
BenchmarkLimiter/allow/serial/wrapped-32       	 7437230	       156.1 ns/op
--- BENCH: BenchmarkLimiter/allow/serial/wrapped-32
    ratelimiter_test.go:104: allowed: 1,          denied: 0,           time per allow:   18.36µs
    ratelimiter_test.go:104: allowed: 100,        denied: 0,           time per allow:     450ns
    ratelimiter_test.go:104: allowed: 2729,       denied: 7271,        time per allow:     639ns
    ratelimiter_test.go:104: allowed: 162298,     denied: 837702,      time per allow:     993ns
    ratelimiter_test.go:104: allowed: 1162259,    denied: 6274971,     time per allow:     999ns
BenchmarkLimiter/allow/serial/wrapped-128      	 7656168	       156.8 ns/op
--- BENCH: BenchmarkLimiter/allow/serial/wrapped-128
    ratelimiter_test.go:104: allowed: 1,          denied: 0,           time per allow:   38.41µs
    ratelimiter_test.go:104: allowed: 100,        denied: 0,           time per allow:     344ns
    ratelimiter_test.go:104: allowed: 2700,       denied: 7300,        time per allow:     634ns
    ratelimiter_test.go:104: allowed: 157697,     denied: 842303,      time per allow:     993ns
    ratelimiter_test.go:104: allowed: 1201559,    denied: 6454609,     time per allow:     999ns
BenchmarkLimiter/allow/serial/mocked_timesource             	 9305582	       131.9 ns/op
--- BENCH: BenchmarkLimiter/allow/serial/mocked_timesource
    ratelimiter_test.go:104: allowed: 1,          denied: 0,           time per allow:   38.86µs
    ratelimiter_test.go:104: allowed: 100,        denied: 0,           time per allow:     239ns
    ratelimiter_test.go:104: allowed: 2999,       denied: 7001,        time per allow:     398ns
    ratelimiter_test.go:104: allowed: 200999,     denied: 799001,      time per allow:     641ns
    ratelimiter_test.go:104: allowed: 1862116,    denied: 7443466,     time per allow:     659ns
BenchmarkLimiter/allow/serial/mocked_timesource-2           	 9528645	       123.3 ns/op
--- BENCH: BenchmarkLimiter/allow/serial/mocked_timesource-2
    ratelimiter_test.go:104: allowed: 1,          denied: 0,           time per allow:    14.6µs
    ratelimiter_test.go:104: allowed: 100,        denied: 0,           time per allow:     474ns
    ratelimiter_test.go:104: allowed: 2999,       denied: 7001,        time per allow:     404ns
    ratelimiter_test.go:104: allowed: 200999,     denied: 799001,      time per allow:     626ns
    ratelimiter_test.go:104: allowed: 1906728,    denied: 7621917,     time per allow:     616ns
BenchmarkLimiter/allow/serial/mocked_timesource-4           	 9672836	       125.0 ns/op
--- BENCH: BenchmarkLimiter/allow/serial/mocked_timesource-4
    ratelimiter_test.go:104: allowed: 1,          denied: 0,           time per allow:    36.3µs
    ratelimiter_test.go:104: allowed: 100,        denied: 0,           time per allow:     585ns
    ratelimiter_test.go:104: allowed: 2999,       denied: 7001,        time per allow:     453ns
    ratelimiter_test.go:104: allowed: 200999,     denied: 799001,      time per allow:     617ns
    ratelimiter_test.go:104: allowed: 1935567,    denied: 7737269,     time per allow:     624ns
BenchmarkLimiter/allow/serial/mocked_timesource-8           	 9442135	       124.0 ns/op
--- BENCH: BenchmarkLimiter/allow/serial/mocked_timesource-8
    ratelimiter_test.go:104: allowed: 1,          denied: 0,           time per allow:   25.25µs
    ratelimiter_test.go:104: allowed: 100,        denied: 0,           time per allow:     531ns
    ratelimiter_test.go:104: allowed: 2999,       denied: 7001,        time per allow:     451ns
    ratelimiter_test.go:104: allowed: 200999,     denied: 799001,      time per allow:     632ns
    ratelimiter_test.go:104: allowed: 1889426,    denied: 7552709,     time per allow:     619ns
BenchmarkLimiter/allow/serial/mocked_timesource-32          	 9720332	       123.9 ns/op
--- BENCH: BenchmarkLimiter/allow/serial/mocked_timesource-32
    ratelimiter_test.go:104: allowed: 1,          denied: 0,           time per allow:    26.6µs
    ratelimiter_test.go:104: allowed: 100,        denied: 0,           time per allow:     318ns
    ratelimiter_test.go:104: allowed: 2999,       denied: 7001,        time per allow:     463ns
    ratelimiter_test.go:104: allowed: 200999,     denied: 799001,      time per allow:     614ns
    ratelimiter_test.go:104: allowed: 1945066,    denied: 7775266,     time per allow:     619ns
BenchmarkLimiter/allow/serial/mocked_timesource-128         	 9718560	       124.5 ns/op
--- BENCH: BenchmarkLimiter/allow/serial/mocked_timesource-128
    ratelimiter_test.go:104: allowed: 1,          denied: 0,           time per allow:    24.1µs
    ratelimiter_test.go:104: allowed: 100,        denied: 0,           time per allow:     625ns
    ratelimiter_test.go:104: allowed: 2999,       denied: 7001,        time per allow:     412ns
    ratelimiter_test.go:104: allowed: 200999,     denied: 799001,      time per allow:     614ns
    ratelimiter_test.go:104: allowed: 1944711,    denied: 7773849,     time per allow:     622ns
BenchmarkLimiter/allow/parallel/real                        	10223542	       117.5 ns/op
--- BENCH: BenchmarkLimiter/allow/parallel/real
    ratelimiter_test.go:126: allowed: 1,          denied: 0,           time per allow:  168.84µs
    ratelimiter_test.go:126: allowed: 100,        denied: 0,           time per allow:     294ns
    ratelimiter_test.go:126: allowed: 2178,       denied: 7822,        time per allow:     543ns
    ratelimiter_test.go:126: allowed: 118324,     denied: 881676,      time per allow:     991ns
    ratelimiter_test.go:126: allowed: 1201862,    denied: 9021680,     time per allow:     999ns
BenchmarkLimiter/allow/parallel/real-2                      	 7900808	       166.3 ns/op
--- BENCH: BenchmarkLimiter/allow/parallel/real-2
    ratelimiter_test.go:126: allowed: 1,          denied: 0,           time per allow:   41.38µs
    ratelimiter_test.go:126: allowed: 100,        denied: 0,           time per allow:     312ns
    ratelimiter_test.go:126: allowed: 2114,       denied: 7886,        time per allow:     501ns
    ratelimiter_test.go:126: allowed: 153558,     denied: 846442,      time per allow:     988ns
    ratelimiter_test.go:126: allowed: 1318723,    denied: 6582085,     time per allow:     996ns
BenchmarkLimiter/allow/parallel/real-4                      	12359212	       131.2 ns/op
--- BENCH: BenchmarkLimiter/allow/parallel/real-4
    ratelimiter_test.go:126: allowed: 1,          denied: 0,           time per allow:   62.82µs
    ratelimiter_test.go:126: allowed: 100,        denied: 0,           time per allow:     650ns
    ratelimiter_test.go:126: allowed: 2343,       denied: 7657,        time per allow:     439ns
    ratelimiter_test.go:126: allowed: 100990,     denied: 899010,      time per allow:     961ns
    ratelimiter_test.go:126: allowed: 1665124,    denied: 10694088,    time per allow:     973ns
BenchmarkLimiter/allow/parallel/real-8                      	 6939416	       197.0 ns/op
--- BENCH: BenchmarkLimiter/allow/parallel/real-8
    ratelimiter_test.go:126: allowed: 1,          denied: 0,           time per allow:   39.44µs
    ratelimiter_test.go:126: allowed: 100,        denied: 0,           time per allow:     478ns
    ratelimiter_test.go:126: allowed: 6784,       denied: 3216,        time per allow:     221ns
    ratelimiter_test.go:126: allowed: 582212,     denied: 417788,      time per allow:     296ns
    ratelimiter_test.go:126: allowed: 5527088,    denied: 1412328,     time per allow:     247ns
BenchmarkLimiter/allow/parallel/real-32                     	 3756254	       317.9 ns/op
--- BENCH: BenchmarkLimiter/allow/parallel/real-32
    ratelimiter_test.go:126: allowed: 1,          denied: 0,           time per allow:   44.46µs
    ratelimiter_test.go:126: allowed: 100,        denied: 0,           time per allow:     844ns
    ratelimiter_test.go:126: allowed: 10000,      denied: 0,           time per allow:     302ns
    ratelimiter_test.go:126: allowed: 999764,     denied: 236,         time per allow:     319ns
    ratelimiter_test.go:126: allowed: 3755318,    denied: 936,         time per allow:     318ns
BenchmarkLimiter/allow/parallel/real-128                    	 3675212	       330.6 ns/op
--- BENCH: BenchmarkLimiter/allow/parallel/real-128
    ratelimiter_test.go:126: allowed: 1,          denied: 0,           time per allow:    94.7µs
    ratelimiter_test.go:126: allowed: 100,        denied: 0,           time per allow:    1.18µs
    ratelimiter_test.go:126: allowed: 10000,      denied: 0,           time per allow:     317ns
    ratelimiter_test.go:126: allowed: 1000000,    denied: 0,           time per allow:     326ns
    ratelimiter_test.go:126: allowed: 3674290,    denied: 922,         time per allow:     330ns
BenchmarkLimiter/allow/parallel/wrapped                     	 7478194	       159.5 ns/op
--- BENCH: BenchmarkLimiter/allow/parallel/wrapped
    ratelimiter_test.go:126: allowed: 1,          denied: 0,           time per allow:  169.81µs
    ratelimiter_test.go:126: allowed: 100,        denied: 0,           time per allow:     347ns
    ratelimiter_test.go:126: allowed: 2559,       denied: 7441,        time per allow:     612ns
    ratelimiter_test.go:126: allowed: 161198,     denied: 838802,      time per allow:     995ns
    ratelimiter_test.go:126: allowed: 1193390,    denied: 6284804,     time per allow:     999ns
BenchmarkLimiter/allow/parallel/wrapped-2                   	 6251299	       176.5 ns/op
--- BENCH: BenchmarkLimiter/allow/parallel/wrapped-2
    ratelimiter_test.go:126: allowed: 1,          denied: 0,           time per allow:    53.1µs
    ratelimiter_test.go:126: allowed: 100,        denied: 0,           time per allow:     989ns
    ratelimiter_test.go:126: allowed: 3279,       denied: 6721,        time per allow:     699ns
    ratelimiter_test.go:126: allowed: 192918,     denied: 807082,      time per allow:     994ns
    ratelimiter_test.go:126: allowed: 1104065,    denied: 5147234,     time per allow:     999ns
BenchmarkLimiter/allow/parallel/wrapped-4                   	 5764837	       211.6 ns/op
--- BENCH: BenchmarkLimiter/allow/parallel/wrapped-4
    ratelimiter_test.go:126: allowed: 1,          denied: 0,           time per allow:  46.871µs
    ratelimiter_test.go:126: allowed: 100,        denied: 0,           time per allow:     575ns
    ratelimiter_test.go:126: allowed: 3484,       denied: 6516,        time per allow:     725ns
    ratelimiter_test.go:126: allowed: 209008,     denied: 790992,      time per allow:     995ns
    ratelimiter_test.go:126: allowed: 1220842,    denied: 4543995,     time per allow:     999ns
BenchmarkLimiter/allow/parallel/wrapped-8                   	 4284325	       308.6 ns/op
--- BENCH: BenchmarkLimiter/allow/parallel/wrapped-8
    ratelimiter_test.go:126: allowed: 1,          denied: 0,           time per allow:  57.491µs
    ratelimiter_test.go:126: allowed: 100,        denied: 0,           time per allow:     616ns
    ratelimiter_test.go:126: allowed: 3529,       denied: 6471,        time per allow:     722ns
    ratelimiter_test.go:126: allowed: 281049,     denied: 718951,      time per allow:     996ns
    ratelimiter_test.go:126: allowed: 1323079,    denied: 2961246,     time per allow:     999ns
BenchmarkLimiter/allow/parallel/wrapped-32                  	 2409673	       482.1 ns/op
--- BENCH: BenchmarkLimiter/allow/parallel/wrapped-32
    ratelimiter_test.go:126: allowed: 1,          denied: 0,           time per allow:   75.67µs
    ratelimiter_test.go:126: allowed: 100,        denied: 0,           time per allow:   1.111µs
    ratelimiter_test.go:126: allowed: 5707,       denied: 4293,        time per allow:     831ns
    ratelimiter_test.go:126: allowed: 498926,     denied: 501074,      time per allow:     998ns
    ratelimiter_test.go:126: allowed: 1162637,    denied: 1247036,     time per allow:     999ns
BenchmarkLimiter/allow/parallel/wrapped-128                 	 2341096	       502.4 ns/op
--- BENCH: BenchmarkLimiter/allow/parallel/wrapped-128
    ratelimiter_test.go:126: allowed: 1,          denied: 0,           time per allow:   96.87µs
    ratelimiter_test.go:126: allowed: 100,        denied: 0,           time per allow:   1.506µs
    ratelimiter_test.go:126: allowed: 5555,       denied: 4445,        time per allow:     825ns
    ratelimiter_test.go:126: allowed: 513504,     denied: 486496,      time per allow:     998ns
    ratelimiter_test.go:126: allowed: 1177180,    denied: 1163916,     time per allow:     999ns
BenchmarkLimiter/allow/parallel/mocked_timesource           	 8892886	       133.0 ns/op
--- BENCH: BenchmarkLimiter/allow/parallel/mocked_timesource
    ratelimiter_test.go:126: allowed: 1,          denied: 0,           time per allow:  120.16µs
    ratelimiter_test.go:126: allowed: 100,        denied: 0,           time per allow:     342ns
    ratelimiter_test.go:126: allowed: 2999,       denied: 7001,        time per allow:     423ns
    ratelimiter_test.go:126: allowed: 200999,     denied: 799001,      time per allow:     671ns
    ratelimiter_test.go:126: allowed: 1779577,    denied: 7113309,     time per allow:     664ns
BenchmarkLimiter/allow/parallel/mocked_timesource-2         	 8324646	       159.7 ns/op
--- BENCH: BenchmarkLimiter/allow/parallel/mocked_timesource-2
    ratelimiter_test.go:126: allowed: 1,          denied: 0,           time per allow:   66.11µs
    ratelimiter_test.go:126: allowed: 100,        denied: 0,           time per allow:     401ns
    ratelimiter_test.go:126: allowed: 2999,       denied: 7001,        time per allow:     483ns
    ratelimiter_test.go:126: allowed: 200999,     denied: 799001,      time per allow:     717ns
    ratelimiter_test.go:126: allowed: 1665929,    denied: 6658717,     time per allow:     798ns
BenchmarkLimiter/allow/parallel/mocked_timesource-4         	 6206377	       195.2 ns/op
--- BENCH: BenchmarkLimiter/allow/parallel/mocked_timesource-4
    ratelimiter_test.go:126: allowed: 1,          denied: 0,           time per allow:   42.42µs
    ratelimiter_test.go:126: allowed: 100,        denied: 0,           time per allow:     803ns
    ratelimiter_test.go:126: allowed: 2999,       denied: 7001,        time per allow:     611ns
    ratelimiter_test.go:126: allowed: 200999,     denied: 799001,      time per allow:     961ns
    ratelimiter_test.go:126: allowed: 1242275,    denied: 4964102,     time per allow:     974ns
BenchmarkLimiter/allow/parallel/mocked_timesource-8         	 5293868	       233.9 ns/op
--- BENCH: BenchmarkLimiter/allow/parallel/mocked_timesource-8
    ratelimiter_test.go:126: allowed: 1,          denied: 0,           time per allow:   63.65µs
    ratelimiter_test.go:126: allowed: 100,        denied: 0,           time per allow:     659ns
    ratelimiter_test.go:126: allowed: 2999,       denied: 7001,        time per allow:     749ns
    ratelimiter_test.go:126: allowed: 200999,     denied: 799001,      time per allow:   1.127µs
    ratelimiter_test.go:126: allowed: 1059773,    denied: 4234095,     time per allow:   1.168µs
BenchmarkLimiter/allow/parallel/mocked_timesource-32        	 4502817	       261.2 ns/op
--- BENCH: BenchmarkLimiter/allow/parallel/mocked_timesource-32
    ratelimiter_test.go:126: allowed: 1,          denied: 0,           time per allow:  93.889µs
    ratelimiter_test.go:126: allowed: 100,        denied: 0,           time per allow:     837ns
    ratelimiter_test.go:126: allowed: 2999,       denied: 7001,        time per allow:     917ns
    ratelimiter_test.go:126: allowed: 200999,     denied: 799001,      time per allow:   1.325µs
    ratelimiter_test.go:126: allowed: 901563,     denied: 3601254,     time per allow:   1.304µs
BenchmarkLimiter/allow/parallel/mocked_timesource-128       	 4399952	       270.2 ns/op
--- BENCH: BenchmarkLimiter/allow/parallel/mocked_timesource-128
    ratelimiter_test.go:126: allowed: 1,          denied: 0,           time per allow:  101.88µs
    ratelimiter_test.go:126: allowed: 100,        denied: 0,           time per allow:   2.783µs
    ratelimiter_test.go:126: allowed: 2999,       denied: 7001,        time per allow:     788ns
    ratelimiter_test.go:126: allowed: 200999,     denied: 799001,      time per allow:   1.356µs
    ratelimiter_test.go:126: allowed: 880990,     denied: 3518962,     time per allow:   1.349µs
BenchmarkLimiter/reserve-canceling-every-3/serial/real      	 3613904	       311.1 ns/op
--- BENCH: BenchmarkLimiter/reserve-canceling-every-3/serial/real
    ratelimiter_test.go:104: allowed: 0,          denied: 1,           time per allow:       n/a
    ratelimiter_test.go:104: allowed: 66,         denied: 34,          time per allow:   1.125µs
    ratelimiter_test.go:104: allowed: 3331,       denied: 6669,        time per allow:   1.186µs
    ratelimiter_test.go:104: allowed: 175876,     denied: 824124,      time per allow:   1.887µs
    ratelimiter_test.go:104: allowed: 547055,     denied: 3066849,     time per allow:   2.055µs
BenchmarkLimiter/reserve-canceling-every-3/serial/real-2    	 4034290	       297.0 ns/op
--- BENCH: BenchmarkLimiter/reserve-canceling-every-3/serial/real-2
    ratelimiter_test.go:104: allowed: 0,          denied: 1,           time per allow:       n/a
    ratelimiter_test.go:104: allowed: 66,         denied: 34,          time per allow:     933ns
    ratelimiter_test.go:104: allowed: 2095,       denied: 7905,        time per allow:   1.388µs
    ratelimiter_test.go:104: allowed: 141055,     denied: 858945,      time per allow:   2.108µs
    ratelimiter_test.go:104: allowed: 562570,     denied: 3471720,     time per allow:   2.129µs
BenchmarkLimiter/reserve-canceling-every-3/serial/real-4    	 3989199	       297.1 ns/op
--- BENCH: BenchmarkLimiter/reserve-canceling-every-3/serial/real-4
    ratelimiter_test.go:104: allowed: 0,          denied: 1,           time per allow:       n/a
    ratelimiter_test.go:104: allowed: 66,         denied: 34,          time per allow:    1.12µs
    ratelimiter_test.go:104: allowed: 2209,       denied: 7791,        time per allow:   1.364µs
    ratelimiter_test.go:104: allowed: 145652,     denied: 854348,      time per allow:   2.065µs
    ratelimiter_test.go:104: allowed: 561898,     denied: 3427301,     time per allow:   2.109µs
BenchmarkLimiter/reserve-canceling-every-3/serial/real-8    	 4012851	       297.8 ns/op
--- BENCH: BenchmarkLimiter/reserve-canceling-every-3/serial/real-8
    ratelimiter_test.go:104: allowed: 0,          denied: 1,           time per allow:       n/a
    ratelimiter_test.go:104: allowed: 66,         denied: 34,          time per allow:     804ns
    ratelimiter_test.go:104: allowed: 2207,       denied: 7793,        time per allow:   1.345µs
    ratelimiter_test.go:104: allowed: 141163,     denied: 858837,      time per allow:   2.118µs
    ratelimiter_test.go:104: allowed: 563824,     denied: 3449027,     time per allow:   2.119µs
BenchmarkLimiter/reserve-canceling-every-3/serial/real-32   	 3993194	       298.8 ns/op
--- BENCH: BenchmarkLimiter/reserve-canceling-every-3/serial/real-32
    ratelimiter_test.go:104: allowed: 0,          denied: 1,           time per allow:       n/a
    ratelimiter_test.go:104: allowed: 66,         denied: 34,          time per allow:   1.022µs
    ratelimiter_test.go:104: allowed: 2372,       denied: 7628,        time per allow:   1.348µs
    ratelimiter_test.go:104: allowed: 143465,     denied: 856535,      time per allow:   2.094µs
    ratelimiter_test.go:104: allowed: 568165,     denied: 3425029,     time per allow:     2.1µs
BenchmarkLimiter/reserve-canceling-every-3/serial/real-128  	 3933008	       305.1 ns/op
--- BENCH: BenchmarkLimiter/reserve-canceling-every-3/serial/real-128
    ratelimiter_test.go:104: allowed: 0,          denied: 1,           time per allow:       n/a
    ratelimiter_test.go:104: allowed: 66,         denied: 34,          time per allow:     999ns
    ratelimiter_test.go:104: allowed: 2186,       denied: 7814,        time per allow:    1.35µs
    ratelimiter_test.go:104: allowed: 145761,     denied: 854239,      time per allow:   2.093µs
    ratelimiter_test.go:104: allowed: 579750,     denied: 3353258,     time per allow:   2.069µs
BenchmarkLimiter/reserve-canceling-every-3/serial/real_pinned_time             	 7864701	       153.2 ns/op
--- BENCH: BenchmarkLimiter/reserve-canceling-every-3/serial/real_pinned_time
    ratelimiter_test.go:104: allowed: 0,          denied: 1,           time per allow:       n/a
    ratelimiter_test.go:104: allowed: 66,         denied: 34,          time per allow:     350ns
    ratelimiter_test.go:104: allowed: 2467,       denied: 7533,        time per allow:     596ns
    ratelimiter_test.go:104: allowed: 153502,     denied: 846498,      time per allow:     993ns
    ratelimiter_test.go:104: allowed: 1205607,    denied: 6659094,     time per allow:     999ns
BenchmarkLimiter/reserve-canceling-every-3/serial/real_pinned_time-2           	 7901824	       151.7 ns/op
--- BENCH: BenchmarkLimiter/reserve-canceling-every-3/serial/real_pinned_time-2
    ratelimiter_test.go:104: allowed: 0,          denied: 1,           time per allow:       n/a
    ratelimiter_test.go:104: allowed: 66,         denied: 34,          time per allow:     616ns
    ratelimiter_test.go:104: allowed: 2457,       denied: 7543,        time per allow:     595ns
    ratelimiter_test.go:104: allowed: 152802,     denied: 847198,      time per allow:     993ns
    ratelimiter_test.go:104: allowed: 1199547,    denied: 6702277,     time per allow:     999ns
BenchmarkLimiter/reserve-canceling-every-3/serial/real_pinned_time-4           	 7875562	       152.6 ns/op
--- BENCH: BenchmarkLimiter/reserve-canceling-every-3/serial/real_pinned_time-4
    ratelimiter_test.go:104: allowed: 0,          denied: 1,           time per allow:       n/a
    ratelimiter_test.go:104: allowed: 66,         denied: 34,          time per allow:     515ns
    ratelimiter_test.go:104: allowed: 2458,       denied: 7542,        time per allow:     597ns
    ratelimiter_test.go:104: allowed: 153305,     denied: 846695,      time per allow:     993ns
    ratelimiter_test.go:104: allowed: 1202684,    denied: 6672878,     time per allow:     999ns
BenchmarkLimiter/reserve-canceling-every-3/serial/real_pinned_time-8           	 7915362	       152.4 ns/op
--- BENCH: BenchmarkLimiter/reserve-canceling-every-3/serial/real_pinned_time-8
    ratelimiter_test.go:104: allowed: 0,          denied: 1,           time per allow:       n/a
    ratelimiter_test.go:104: allowed: 66,         denied: 34,          time per allow:     784ns
    ratelimiter_test.go:104: allowed: 2467,       denied: 7533,        time per allow:     601ns
    ratelimiter_test.go:104: allowed: 152547,     denied: 847453,      time per allow:     993ns
    ratelimiter_test.go:104: allowed: 1207393,    denied: 6707969,     time per allow:     999ns
BenchmarkLimiter/reserve-canceling-every-3/serial/real_pinned_time-32          	 7908129	       152.5 ns/op
--- BENCH: BenchmarkLimiter/reserve-canceling-every-3/serial/real_pinned_time-32
    ratelimiter_test.go:104: allowed: 0,          denied: 1,           time per allow:       n/a
    ratelimiter_test.go:104: allowed: 66,         denied: 34,          time per allow:     683ns
    ratelimiter_test.go:104: allowed: 2477,       denied: 7523,        time per allow:     605ns
    ratelimiter_test.go:104: allowed: 152678,     denied: 847322,      time per allow:     993ns
    ratelimiter_test.go:104: allowed: 1207089,    denied: 6701040,     time per allow:     999ns
BenchmarkLimiter/reserve-canceling-every-3/serial/real_pinned_time-128         	 7907260	       152.0 ns/op
--- BENCH: BenchmarkLimiter/reserve-canceling-every-3/serial/real_pinned_time-128
    ratelimiter_test.go:104: allowed: 0,          denied: 1,           time per allow:       n/a
    ratelimiter_test.go:104: allowed: 66,         denied: 34,          time per allow:     715ns
    ratelimiter_test.go:104: allowed: 2516,       denied: 7484,        time per allow:     615ns
    ratelimiter_test.go:104: allowed: 152676,     denied: 847324,      time per allow:     993ns
    ratelimiter_test.go:104: allowed: 1203118,    denied: 6704142,     time per allow:     999ns
BenchmarkLimiter/reserve-canceling-every-3/serial/wrapped                      	 3624789	       338.5 ns/op
--- BENCH: BenchmarkLimiter/reserve-canceling-every-3/serial/wrapped
    ratelimiter_test.go:104: allowed: 0,          denied: 1,           time per allow:       n/a
    ratelimiter_test.go:104: allowed: 66,         denied: 34,          time per allow:     684ns
    ratelimiter_test.go:104: allowed: 4074,       denied: 5926,        time per allow:     756ns
    ratelimiter_test.go:104: allowed: 332018,     denied: 667982,      time per allow:     997ns
    ratelimiter_test.go:104: allowed: 1227930,    denied: 2396859,     time per allow:     999ns
BenchmarkLimiter/reserve-canceling-every-3/serial/wrapped-2                    	 3835138	       313.6 ns/op
--- BENCH: BenchmarkLimiter/reserve-canceling-every-3/serial/wrapped-2
    ratelimiter_test.go:104: allowed: 0,          denied: 1,           time per allow:       n/a
    ratelimiter_test.go:104: allowed: 66,         denied: 34,          time per allow:     689ns
    ratelimiter_test.go:104: allowed: 4064,       denied: 5936,        time per allow:     756ns
    ratelimiter_test.go:104: allowed: 313853,     denied: 686147,      time per allow:     996ns
    ratelimiter_test.go:104: allowed: 1203518,    denied: 2631620,     time per allow:     999ns
BenchmarkLimiter/reserve-canceling-every-3/serial/wrapped-4                    	 3938518	       299.9 ns/op
--- BENCH: BenchmarkLimiter/reserve-canceling-every-3/serial/wrapped-4
    ratelimiter_test.go:104: allowed: 0,          denied: 1,           time per allow:       n/a
    ratelimiter_test.go:104: allowed: 66,         denied: 34,          time per allow:     856ns
    ratelimiter_test.go:104: allowed: 4003,       denied: 5997,        time per allow:     753ns
    ratelimiter_test.go:104: allowed: 305645,     denied: 694355,      time per allow:     996ns
    ratelimiter_test.go:104: allowed: 1181983,    denied: 2756535,     time per allow:     999ns
BenchmarkLimiter/reserve-canceling-every-3/serial/wrapped-8                    	 3957276	       307.9 ns/op
--- BENCH: BenchmarkLimiter/reserve-canceling-every-3/serial/wrapped-8
    ratelimiter_test.go:104: allowed: 0,          denied: 1,           time per allow:       n/a
    ratelimiter_test.go:104: allowed: 66,         denied: 34,          time per allow:   1.081µs
    ratelimiter_test.go:104: allowed: 4233,       denied: 5767,        time per allow:     777ns
    ratelimiter_test.go:104: allowed: 304199,     denied: 695801,      time per allow:     996ns
    ratelimiter_test.go:104: allowed: 1219530,    denied: 2737746,     time per allow:     999ns
BenchmarkLimiter/reserve-canceling-every-3/serial/wrapped-32                   	 3926259	       309.6 ns/op
--- BENCH: BenchmarkLimiter/reserve-canceling-every-3/serial/wrapped-32
    ratelimiter_test.go:104: allowed: 0,          denied: 1,           time per allow:       n/a
    ratelimiter_test.go:104: allowed: 66,         denied: 34,          time per allow:   1.191µs
    ratelimiter_test.go:104: allowed: 4064,       denied: 5936,        time per allow:     756ns
    ratelimiter_test.go:104: allowed: 306593,     denied: 693407,      time per allow:     996ns
    ratelimiter_test.go:104: allowed: 1216361,    denied: 2709898,     time per allow:     999ns
BenchmarkLimiter/reserve-canceling-every-3/serial/wrapped-128                  	 3990670	       303.1 ns/op
--- BENCH: BenchmarkLimiter/reserve-canceling-every-3/serial/wrapped-128
    ratelimiter_test.go:104: allowed: 0,          denied: 1,           time per allow:       n/a
    ratelimiter_test.go:104: allowed: 66,         denied: 34,          time per allow:     968ns
    ratelimiter_test.go:104: allowed: 4129,       denied: 5871,        time per allow:     760ns
    ratelimiter_test.go:104: allowed: 301659,     denied: 698341,      time per allow:     996ns
    ratelimiter_test.go:104: allowed: 1210624,    denied: 2780046,     time per allow:     999ns
BenchmarkLimiter/reserve-canceling-every-3/serial/mocked_timesource            	 3822452	       313.8 ns/op
--- BENCH: BenchmarkLimiter/reserve-canceling-every-3/serial/mocked_timesource
    ratelimiter_test.go:104: allowed: 0,          denied: 1,           time per allow:       n/a
    ratelimiter_test.go:104: allowed: 66,         denied: 34,          time per allow:     864ns
    ratelimiter_test.go:104: allowed: 2999,       denied: 7001,        time per allow:     921ns
    ratelimiter_test.go:104: allowed: 200999,     denied: 799001,      time per allow:   1.561µs
    ratelimiter_test.go:104: allowed: 765490,     denied: 3056962,     time per allow:   1.566µs
BenchmarkLimiter/reserve-canceling-every-3/serial/mocked_timesource-2          	 4164394	       274.8 ns/op
--- BENCH: BenchmarkLimiter/reserve-canceling-every-3/serial/mocked_timesource-2
    ratelimiter_test.go:104: allowed: 0,          denied: 1,           time per allow:       n/a
    ratelimiter_test.go:104: allowed: 66,         denied: 34,          time per allow:     797ns
    ratelimiter_test.go:104: allowed: 2999,       denied: 7001,        time per allow:     911ns
    ratelimiter_test.go:104: allowed: 200999,     denied: 799001,      time per allow:   1.433µs
    ratelimiter_test.go:104: allowed: 833878,     denied: 3330516,     time per allow:   1.372µs
BenchmarkLimiter/reserve-canceling-every-3/serial/mocked_timesource-4          	 4308428	       285.6 ns/op
--- BENCH: BenchmarkLimiter/reserve-canceling-every-3/serial/mocked_timesource-4
    ratelimiter_test.go:104: allowed: 0,          denied: 1,           time per allow:       n/a
    ratelimiter_test.go:104: allowed: 66,         denied: 34,          time per allow:     841ns
    ratelimiter_test.go:104: allowed: 2999,       denied: 7001,        time per allow:    1.09µs
    ratelimiter_test.go:104: allowed: 200999,     denied: 799001,      time per allow:   1.385µs
    ratelimiter_test.go:104: allowed: 862685,     denied: 3445743,     time per allow:   1.426µs
BenchmarkLimiter/reserve-canceling-every-3/serial/mocked_timesource-8          	 4192443	       282.6 ns/op
--- BENCH: BenchmarkLimiter/reserve-canceling-every-3/serial/mocked_timesource-8
    ratelimiter_test.go:104: allowed: 0,          denied: 1,           time per allow:       n/a
    ratelimiter_test.go:104: allowed: 66,         denied: 34,          time per allow:     818ns
    ratelimiter_test.go:104: allowed: 2999,       denied: 7001,        time per allow:     982ns
    ratelimiter_test.go:104: allowed: 200999,     denied: 799001,      time per allow:   1.423µs
    ratelimiter_test.go:104: allowed: 839488,     denied: 3352955,     time per allow:   1.411µs
BenchmarkLimiter/reserve-canceling-every-3/serial/mocked_timesource-32         	 4050039	       298.6 ns/op
--- BENCH: BenchmarkLimiter/reserve-canceling-every-3/serial/mocked_timesource-32
    ratelimiter_test.go:104: allowed: 0,          denied: 1,           time per allow:       n/a
    ratelimiter_test.go:104: allowed: 66,         denied: 34,          time per allow:    1.03µs
    ratelimiter_test.go:104: allowed: 2999,       denied: 7001,        time per allow:     954ns
    ratelimiter_test.go:104: allowed: 200999,     denied: 799001,      time per allow:   1.473µs
    ratelimiter_test.go:104: allowed: 811007,     denied: 3239032,     time per allow:    1.49µs
BenchmarkLimiter/reserve-canceling-every-3/serial/mocked_timesource-128        	 4038399	       297.4 ns/op
--- BENCH: BenchmarkLimiter/reserve-canceling-every-3/serial/mocked_timesource-128
    ratelimiter_test.go:104: allowed: 0,          denied: 1,           time per allow:       n/a
    ratelimiter_test.go:104: allowed: 66,         denied: 34,          time per allow:    1.34µs
    ratelimiter_test.go:104: allowed: 2999,       denied: 7001,        time per allow:     897ns
    ratelimiter_test.go:104: allowed: 200999,     denied: 799001,      time per allow:   1.478µs
    ratelimiter_test.go:104: allowed: 808679,     denied: 3229720,     time per allow:   1.485µs
BenchmarkLimiter/reserve-canceling-every-3/parallel/real                       	 3866833	       304.4 ns/op
--- BENCH: BenchmarkLimiter/reserve-canceling-every-3/parallel/real
    ratelimiter_test.go:126: allowed: 0,          denied: 1,           time per allow:       n/a
    ratelimiter_test.go:126: allowed: 66,         denied: 34,          time per allow:     648ns
    ratelimiter_test.go:126: allowed: 2098,       denied: 7902,        time per allow:   1.403µs
    ratelimiter_test.go:126: allowed: 149271,     denied: 850729,      time per allow:   2.078µs
    ratelimiter_test.go:126: allowed: 557293,     denied: 3309540,     time per allow:   2.112µs
BenchmarkLimiter/reserve-canceling-every-3/parallel/real-2                     	 3407504	       340.1 ns/op
--- BENCH: BenchmarkLimiter/reserve-canceling-every-3/parallel/real-2
    ratelimiter_test.go:126: allowed: 0,          denied: 1,           time per allow:       n/a
    ratelimiter_test.go:126: allowed: 66,         denied: 34,          time per allow:     943ns
    ratelimiter_test.go:126: allowed: 3524,       denied: 6476,        time per allow:   1.035µs
    ratelimiter_test.go:126: allowed: 282883,     denied: 717117,      time per allow:   1.244µs
    ratelimiter_test.go:126: allowed: 906622,     denied: 2500882,     time per allow:   1.278µs
BenchmarkLimiter/reserve-canceling-every-3/parallel/real-4                     	 3948699	       289.2 ns/op
--- BENCH: BenchmarkLimiter/reserve-canceling-every-3/parallel/real-4
    ratelimiter_test.go:126: allowed: 0,          denied: 1,           time per allow:       n/a
    ratelimiter_test.go:126: allowed: 65,         denied: 35,          time per allow:   1.311µs
    ratelimiter_test.go:126: allowed: 6034,       denied: 3966,        time per allow:     533ns
    ratelimiter_test.go:126: allowed: 515996,     denied: 484004,      time per allow:     588ns
    ratelimiter_test.go:126: allowed: 1922447,    denied: 2026252,     time per allow:     594ns
BenchmarkLimiter/reserve-canceling-every-3/parallel/real-8                     	 3689276	       302.3 ns/op
--- BENCH: BenchmarkLimiter/reserve-canceling-every-3/parallel/real-8
    ratelimiter_test.go:126: allowed: 0,          denied: 1,           time per allow:       n/a
    ratelimiter_test.go:126: allowed: 65,         denied: 35,          time per allow:   1.582µs
    ratelimiter_test.go:126: allowed: 6666,       denied: 3334,        time per allow:     456ns
    ratelimiter_test.go:126: allowed: 666664,     denied: 333336,      time per allow:     487ns
    ratelimiter_test.go:126: allowed: 2459372,    denied: 1229904,     time per allow:     453ns
BenchmarkLimiter/reserve-canceling-every-3/parallel/real-32                    	 2603514	       493.6 ns/op
--- BENCH: BenchmarkLimiter/reserve-canceling-every-3/parallel/real-32
    ratelimiter_test.go:126: allowed: 0,          denied: 1,           time per allow:       n/a
    ratelimiter_test.go:126: allowed: 65,         denied: 35,          time per allow:   1.583µs
    ratelimiter_test.go:126: allowed: 6659,       denied: 3341,        time per allow:     715ns
    ratelimiter_test.go:126: allowed: 666656,     denied: 333344,      time per allow:     691ns
    ratelimiter_test.go:126: allowed: 1735676,    denied: 867838,      time per allow:     740ns
BenchmarkLimiter/reserve-canceling-every-3/parallel/real-128                   	 2320826	       527.4 ns/op
--- BENCH: BenchmarkLimiter/reserve-canceling-every-3/parallel/real-128
    ratelimiter_test.go:126: allowed: 0,          denied: 1,           time per allow:       n/a
    ratelimiter_test.go:126: allowed: 63,         denied: 37,          time per allow:   2.824µs
    ratelimiter_test.go:126: allowed: 6607,       denied: 3393,        time per allow:     686ns
    ratelimiter_test.go:126: allowed: 666666,     denied: 333334,      time per allow:     775ns
    ratelimiter_test.go:126: allowed: 1547178,    denied: 773648,      time per allow:     791ns
BenchmarkLimiter/reserve-canceling-every-3/parallel/real_pinned_time           	 7583402	       158.4 ns/op
--- BENCH: BenchmarkLimiter/reserve-canceling-every-3/parallel/real_pinned_time
    ratelimiter_test.go:126: allowed: 0,          denied: 1,           time per allow:       n/a
    ratelimiter_test.go:126: allowed: 66,         denied: 34,          time per allow:     470ns
    ratelimiter_test.go:126: allowed: 2544,       denied: 7456,        time per allow:     610ns
    ratelimiter_test.go:126: allowed: 159177,     denied: 840823,      time per allow:     993ns
    ratelimiter_test.go:126: allowed: 1202047,    denied: 6381355,     time per allow:     999ns
BenchmarkLimiter/reserve-canceling-every-3/parallel/real_pinned_time-2         	 5667880	       210.4 ns/op
--- BENCH: BenchmarkLimiter/reserve-canceling-every-3/parallel/real_pinned_time-2
    ratelimiter_test.go:126: allowed: 0,          denied: 1,           time per allow:       n/a
    ratelimiter_test.go:126: allowed: 66,         denied: 34,          time per allow:     859ns
    ratelimiter_test.go:126: allowed: 4070,       denied: 5930,        time per allow:     519ns
    ratelimiter_test.go:126: allowed: 316435,     denied: 683565,      time per allow:     668ns
    ratelimiter_test.go:126: allowed: 1792274,    denied: 3875606,     time per allow:     665ns
BenchmarkLimiter/reserve-canceling-every-3/parallel/real_pinned_time-4         	 5974189	       197.0 ns/op
--- BENCH: BenchmarkLimiter/reserve-canceling-every-3/parallel/real_pinned_time-4
    ratelimiter_test.go:126: allowed: 0,          denied: 1,           time per allow:       n/a
    ratelimiter_test.go:126: allowed: 66,         denied: 34,          time per allow:   1.016µs
    ratelimiter_test.go:126: allowed: 6665,       denied: 3335,        time per allow:     320ns
    ratelimiter_test.go:126: allowed: 610368,     denied: 389632,      time per allow:     329ns
    ratelimiter_test.go:126: allowed: 3571673,    denied: 2402516,     time per allow:     329ns
BenchmarkLimiter/reserve-canceling-every-3/parallel/real_pinned_time-8         	 4105464	       297.6 ns/op
--- BENCH: BenchmarkLimiter/reserve-canceling-every-3/parallel/real_pinned_time-8
    ratelimiter_test.go:126: allowed: 0,          denied: 1,           time per allow:       n/a
    ratelimiter_test.go:126: allowed: 65,         denied: 35,          time per allow:     935ns
    ratelimiter_test.go:126: allowed: 6663,       denied: 3337,        time per allow:     452ns
    ratelimiter_test.go:126: allowed: 666664,     denied: 333336,      time per allow:     438ns
    ratelimiter_test.go:126: allowed: 2736976,    denied: 1368488,     time per allow:     446ns
BenchmarkLimiter/reserve-canceling-every-3/parallel/real_pinned_time-32        	 2989174	       387.3 ns/op
--- BENCH: BenchmarkLimiter/reserve-canceling-every-3/parallel/real_pinned_time-32
    ratelimiter_test.go:126: allowed: 0,          denied: 1,           time per allow:       n/a
    ratelimiter_test.go:126: allowed: 65,         denied: 35,          time per allow:   1.626µs
    ratelimiter_test.go:126: allowed: 6666,       denied: 3334,        time per allow:     646ns
    ratelimiter_test.go:126: allowed: 666657,     denied: 333343,      time per allow:     602ns
    ratelimiter_test.go:126: allowed: 1992782,    denied: 996392,      time per allow:     581ns
BenchmarkLimiter/reserve-canceling-every-3/parallel/real_pinned_time-128       	 2983240	       403.7 ns/op
--- BENCH: BenchmarkLimiter/reserve-canceling-every-3/parallel/real_pinned_time-128
    ratelimiter_test.go:126: allowed: 0,          denied: 1,           time per allow:       n/a
    ratelimiter_test.go:126: allowed: 66,         denied: 34,          time per allow:   2.119µs
    ratelimiter_test.go:126: allowed: 6593,       denied: 3407,        time per allow:     623ns
    ratelimiter_test.go:126: allowed: 666625,     denied: 333375,      time per allow:     603ns
    ratelimiter_test.go:126: allowed: 1988781,    denied: 994459,      time per allow:     605ns
BenchmarkLimiter/reserve-canceling-every-3/parallel/wrapped                    	 3752292	       321.8 ns/op
--- BENCH: BenchmarkLimiter/reserve-canceling-every-3/parallel/wrapped
    ratelimiter_test.go:126: allowed: 0,          denied: 1,           time per allow:       n/a
    ratelimiter_test.go:126: allowed: 66,         denied: 34,          time per allow:     841ns
    ratelimiter_test.go:126: allowed: 4047,       denied: 5953,        time per allow:     755ns
    ratelimiter_test.go:126: allowed: 320566,     denied: 679434,      time per allow:     997ns
    ratelimiter_test.go:126: allowed: 1208494,    denied: 2543798,     time per allow:     999ns
BenchmarkLimiter/reserve-canceling-every-3/parallel/wrapped-2                  	 3563108	       333.8 ns/op
--- BENCH: BenchmarkLimiter/reserve-canceling-every-3/parallel/wrapped-2
    ratelimiter_test.go:126: allowed: 0,          denied: 1,           time per allow:       n/a
    ratelimiter_test.go:126: allowed: 66,         denied: 34,          time per allow:   1.181µs
    ratelimiter_test.go:126: allowed: 4493,       denied: 5507,        time per allow:     792ns
    ratelimiter_test.go:126: allowed: 335164,     denied: 664836,      time per allow:   1.004µs
    ratelimiter_test.go:126: allowed: 1181160,    denied: 2381948,     time per allow:   1.006µs
BenchmarkLimiter/reserve-canceling-every-3/parallel/wrapped-4                  	 3388910	       398.8 ns/op
--- BENCH: BenchmarkLimiter/reserve-canceling-every-3/parallel/wrapped-4
    ratelimiter_test.go:126: allowed: 0,          denied: 1,           time per allow:       n/a
    ratelimiter_test.go:126: allowed: 64,         denied: 36,          time per allow:   2.107µs
    ratelimiter_test.go:126: allowed: 4720,       denied: 5280,        time per allow:     818ns
    ratelimiter_test.go:126: allowed: 340674,     denied: 659326,      time per allow:   1.039µs
    ratelimiter_test.go:126: allowed: 1312347,    denied: 2076563,     time per allow:   1.029µs
BenchmarkLimiter/reserve-canceling-every-3/parallel/wrapped-8                  	 2618742	       428.2 ns/op
--- BENCH: BenchmarkLimiter/reserve-canceling-every-3/parallel/wrapped-8
    ratelimiter_test.go:126: allowed: 0,          denied: 1,           time per allow:       n/a
    ratelimiter_test.go:126: allowed: 63,         denied: 37,          time per allow:   2.272µs
    ratelimiter_test.go:126: allowed: 5259,       denied: 4741,        time per allow:     851ns
    ratelimiter_test.go:126: allowed: 427332,     denied: 572668,      time per allow:   1.072µs
    ratelimiter_test.go:126: allowed: 1038904,    denied: 1579838,     time per allow:   1.079µs
BenchmarkLimiter/reserve-canceling-every-3/parallel/wrapped-32                 	 2134645	       601.3 ns/op
--- BENCH: BenchmarkLimiter/reserve-canceling-every-3/parallel/wrapped-32
    ratelimiter_test.go:126: allowed: 0,          denied: 1,           time per allow:       n/a
    ratelimiter_test.go:126: allowed: 63,         denied: 37,          time per allow:   1.211µs
    ratelimiter_test.go:126: allowed: 4795,       denied: 5205,        time per allow:     892ns
    ratelimiter_test.go:126: allowed: 506064,     denied: 493936,      time per allow:    1.11µs
    ratelimiter_test.go:126: allowed: 1143245,    denied: 991400,      time per allow:   1.122µs
BenchmarkLimiter/reserve-canceling-every-3/parallel/wrapped-128                	 1901498	       603.1 ns/op
--- BENCH: BenchmarkLimiter/reserve-canceling-every-3/parallel/wrapped-128
    ratelimiter_test.go:126: allowed: 0,          denied: 1,           time per allow:       n/a
    ratelimiter_test.go:126: allowed: 48,         denied: 52,          time per allow:   4.982µs
    ratelimiter_test.go:126: allowed: 6050,       denied: 3950,        time per allow:     945ns
    ratelimiter_test.go:126: allowed: 569410,     denied: 430590,      time per allow:   1.108µs
    ratelimiter_test.go:126: allowed: 1035230,    denied: 866268,      time per allow:   1.107µs
BenchmarkLimiter/reserve-canceling-every-3/parallel/mocked_timesource          	 3877050	       306.2 ns/op
--- BENCH: BenchmarkLimiter/reserve-canceling-every-3/parallel/mocked_timesource
    ratelimiter_test.go:126: allowed: 0,          denied: 1,           time per allow:       n/a
    ratelimiter_test.go:126: allowed: 66,         denied: 34,          time per allow:     622ns
    ratelimiter_test.go:126: allowed: 2999,       denied: 7001,        time per allow:     999ns
    ratelimiter_test.go:126: allowed: 200999,     denied: 799001,      time per allow:   1.539µs
    ratelimiter_test.go:126: allowed: 776409,     denied: 3100641,     time per allow:   1.528µs
BenchmarkLimiter/reserve-canceling-every-3/parallel/mocked_timesource-2        	 3818706	       345.7 ns/op
--- BENCH: BenchmarkLimiter/reserve-canceling-every-3/parallel/mocked_timesource-2
    ratelimiter_test.go:126: allowed: 0,          denied: 1,           time per allow:       n/a
    ratelimiter_test.go:126: allowed: 66,         denied: 34,          time per allow:   1.417µs
    ratelimiter_test.go:126: allowed: 2980,       denied: 7020,        time per allow:   1.436µs
    ratelimiter_test.go:126: allowed: 199033,     denied: 800967,      time per allow:   1.578µs
    ratelimiter_test.go:126: allowed: 756099,     denied: 3062607,     time per allow:   1.745µs
BenchmarkLimiter/reserve-canceling-every-3/parallel/mocked_timesource-4        	 3533508	       354.4 ns/op
--- BENCH: BenchmarkLimiter/reserve-canceling-every-3/parallel/mocked_timesource-4
    ratelimiter_test.go:126: allowed: 0,          denied: 1,           time per allow:       n/a
    ratelimiter_test.go:126: allowed: 66,         denied: 34,          time per allow:   1.258µs
    ratelimiter_test.go:126: allowed: 2873,       denied: 7127,        time per allow:   1.327µs
    ratelimiter_test.go:126: allowed: 187878,     denied: 812122,      time per allow:   1.806µs
    ratelimiter_test.go:126: allowed: 662751,     denied: 2870757,     time per allow:   1.889µs
BenchmarkLimiter/reserve-canceling-every-3/parallel/mocked_timesource-8        	 2784865	       429.3 ns/op
--- BENCH: BenchmarkLimiter/reserve-canceling-every-3/parallel/mocked_timesource-8
    ratelimiter_test.go:126: allowed: 0,          denied: 1,           time per allow:       n/a
    ratelimiter_test.go:126: allowed: 63,         denied: 37,          time per allow:   1.864µs
    ratelimiter_test.go:126: allowed: 2776,       denied: 7224,        time per allow:   1.275µs
    ratelimiter_test.go:126: allowed: 166062,     denied: 833938,      time per allow:   2.594µs
    ratelimiter_test.go:126: allowed: 455641,     denied: 2329224,     time per allow:   2.623µs
BenchmarkLimiter/reserve-canceling-every-3/parallel/mocked_timesource-32       	 2327968	       483.6 ns/op
--- BENCH: BenchmarkLimiter/reserve-canceling-every-3/parallel/mocked_timesource-32
    ratelimiter_test.go:126: allowed: 0,          denied: 1,           time per allow:       n/a
    ratelimiter_test.go:126: allowed: 49,         denied: 51,          time per allow:   5.236µs
    ratelimiter_test.go:126: allowed: 2628,       denied: 7372,        time per allow:   1.615µs
    ratelimiter_test.go:126: allowed: 71018,      denied: 928982,      time per allow:  10.776µs
    ratelimiter_test.go:126: allowed: 173165,     denied: 1394726,     time per allow:   4.667µs
    ratelimiter_test.go:126: allowed: 278945,     denied: 2049023,     time per allow:   4.035µs
BenchmarkLimiter/reserve-canceling-every-3/parallel/mocked_timesource-128      	 1889362	       698.5 ns/op
--- BENCH: BenchmarkLimiter/reserve-canceling-every-3/parallel/mocked_timesource-128
    ratelimiter_test.go:126: allowed: 0,          denied: 1,           time per allow:       n/a
    ratelimiter_test.go:126: allowed: 49,         denied: 51,          time per allow:   4.327µs
    ratelimiter_test.go:126: allowed: 2674,       denied: 7326,        time per allow:   1.655µs
    ratelimiter_test.go:126: allowed: 66954,      denied: 933046,      time per allow:   9.485µs
    ratelimiter_test.go:126: allowed: 108396,     denied: 1780966,     time per allow:  12.174µs
BenchmarkLimiter/wait/serial/2ns_rate/real                                     	 1777234	       685.4 ns/op
--- BENCH: BenchmarkLimiter/wait/serial/2ns_rate/real
    ratelimiter_test.go:104: allowed: 1,          denied: 0,           time per allow:   32.95µs
    ratelimiter_test.go:104: allowed: 100,        denied: 0,           time per allow:     856ns
    ratelimiter_test.go:104: allowed: 10000,      denied: 0,           time per allow:     635ns
    ratelimiter_test.go:104: allowed: 1000000,    denied: 0,           time per allow:     675ns
    ratelimiter_test.go:104: allowed: 1777234,    denied: 0,           time per allow:     685ns
BenchmarkLimiter/wait/serial/2ns_rate/real-2                                   	 2017305	       606.8 ns/op
--- BENCH: BenchmarkLimiter/wait/serial/2ns_rate/real-2
    ratelimiter_test.go:104: allowed: 1,          denied: 0,           time per allow:    22.5µs
    ratelimiter_test.go:104: allowed: 100,        denied: 0,           time per allow:     898ns
    ratelimiter_test.go:104: allowed: 10000,      denied: 0,           time per allow:     656ns
    ratelimiter_test.go:104: allowed: 1000000,    denied: 0,           time per allow:     594ns
    ratelimiter_test.go:104: allowed: 2017305,    denied: 0,           time per allow:     606ns
BenchmarkLimiter/wait/serial/2ns_rate/real-4                                   	 2078498	       597.9 ns/op
--- BENCH: BenchmarkLimiter/wait/serial/2ns_rate/real-4
    ratelimiter_test.go:104: allowed: 1,          denied: 0,           time per allow:    14.3µs
    ratelimiter_test.go:104: allowed: 100,        denied: 0,           time per allow:   1.227µs
    ratelimiter_test.go:104: allowed: 10000,      denied: 0,           time per allow:     635ns
    ratelimiter_test.go:104: allowed: 1000000,    denied: 0,           time per allow:     577ns
    ratelimiter_test.go:104: allowed: 2078498,    denied: 0,           time per allow:     597ns
BenchmarkLimiter/wait/serial/2ns_rate/real-8                                   	 1941156	       617.4 ns/op
--- BENCH: BenchmarkLimiter/wait/serial/2ns_rate/real-8
    ratelimiter_test.go:104: allowed: 1,          denied: 0,           time per allow:    17.8µs
    ratelimiter_test.go:104: allowed: 100,        denied: 0,           time per allow:    1.02µs
    ratelimiter_test.go:104: allowed: 10000,      denied: 0,           time per allow:     668ns
    ratelimiter_test.go:104: allowed: 1000000,    denied: 0,           time per allow:     618ns
    ratelimiter_test.go:104: allowed: 1941156,    denied: 0,           time per allow:     617ns
BenchmarkLimiter/wait/serial/2ns_rate/real-32                                  	 1981118	       600.2 ns/op
--- BENCH: BenchmarkLimiter/wait/serial/2ns_rate/real-32
    ratelimiter_test.go:104: allowed: 1,          denied: 0,           time per allow:   27.29µs
    ratelimiter_test.go:104: allowed: 100,        denied: 0,           time per allow:   1.193µs
    ratelimiter_test.go:104: allowed: 10000,      denied: 0,           time per allow:     648ns
    ratelimiter_test.go:104: allowed: 1000000,    denied: 0,           time per allow:     605ns
    ratelimiter_test.go:104: allowed: 1981118,    denied: 0,           time per allow:     600ns
BenchmarkLimiter/wait/serial/2ns_rate/real-128                                 	 1916803	       604.2 ns/op
--- BENCH: BenchmarkLimiter/wait/serial/2ns_rate/real-128
    ratelimiter_test.go:104: allowed: 1,          denied: 0,           time per allow:   25.98µs
    ratelimiter_test.go:104: allowed: 100,        denied: 0,           time per allow:     813ns
    ratelimiter_test.go:104: allowed: 10000,      denied: 0,           time per allow:     681ns
    ratelimiter_test.go:104: allowed: 1000000,    denied: 0,           time per allow:     626ns
    ratelimiter_test.go:104: allowed: 1916803,    denied: 0,           time per allow:     604ns
BenchmarkLimiter/wait/serial/2ns_rate/wrapped                                  	 1553762	       775.0 ns/op
--- BENCH: BenchmarkLimiter/wait/serial/2ns_rate/wrapped
    ratelimiter_test.go:104: allowed: 1,          denied: 0,           time per allow:   27.77µs
    ratelimiter_test.go:104: allowed: 100,        denied: 0,           time per allow:     785ns
    ratelimiter_test.go:104: allowed: 10000,      denied: 0,           time per allow:     807ns
    ratelimiter_test.go:104: allowed: 1000000,    denied: 0,           time per allow:     772ns
    ratelimiter_test.go:104: allowed: 1553762,    denied: 0,           time per allow:     775ns
BenchmarkLimiter/wait/serial/2ns_rate/wrapped-2                                	 1890338	       662.1 ns/op
--- BENCH: BenchmarkLimiter/wait/serial/2ns_rate/wrapped-2
    ratelimiter_test.go:104: allowed: 1,          denied: 0,           time per allow:   18.24µs
    ratelimiter_test.go:104: allowed: 100,        denied: 0,           time per allow:   1.276µs
    ratelimiter_test.go:104: allowed: 10000,      denied: 0,           time per allow:     692ns
    ratelimiter_test.go:104: allowed: 1000000,    denied: 0,           time per allow:     634ns
    ratelimiter_test.go:104: allowed: 1890338,    denied: 0,           time per allow:     662ns
BenchmarkLimiter/wait/serial/2ns_rate/wrapped-4                                	 1836010	       627.5 ns/op
--- BENCH: BenchmarkLimiter/wait/serial/2ns_rate/wrapped-4
    ratelimiter_test.go:104: allowed: 1,          denied: 0,           time per allow:   22.86µs
    ratelimiter_test.go:104: allowed: 100,        denied: 0,           time per allow:    1.06µs
    ratelimiter_test.go:104: allowed: 10000,      denied: 0,           time per allow:     684ns
    ratelimiter_test.go:104: allowed: 1000000,    denied: 0,           time per allow:     653ns
    ratelimiter_test.go:104: allowed: 1836010,    denied: 0,           time per allow:     627ns
BenchmarkLimiter/wait/serial/2ns_rate/wrapped-8                                	 1919998	       616.2 ns/op
--- BENCH: BenchmarkLimiter/wait/serial/2ns_rate/wrapped-8
    ratelimiter_test.go:104: allowed: 1,          denied: 0,           time per allow:   19.16µs
    ratelimiter_test.go:104: allowed: 100,        denied: 0,           time per allow:     998ns
    ratelimiter_test.go:104: allowed: 10000,      denied: 0,           time per allow:     680ns
    ratelimiter_test.go:104: allowed: 1000000,    denied: 0,           time per allow:     624ns
    ratelimiter_test.go:104: allowed: 1919998,    denied: 0,           time per allow:     616ns
BenchmarkLimiter/wait/serial/2ns_rate/wrapped-32                               	 1835472	       648.0 ns/op
--- BENCH: BenchmarkLimiter/wait/serial/2ns_rate/wrapped-32
    ratelimiter_test.go:104: allowed: 1,          denied: 0,           time per allow:   19.52µs
    ratelimiter_test.go:104: allowed: 100,        denied: 0,           time per allow:   1.094µs
    ratelimiter_test.go:104: allowed: 10000,      denied: 0,           time per allow:     661ns
    ratelimiter_test.go:104: allowed: 1000000,    denied: 0,           time per allow:     653ns
    ratelimiter_test.go:104: allowed: 1835472,    denied: 0,           time per allow:     647ns
BenchmarkLimiter/wait/serial/2ns_rate/wrapped-128                              	 1867640	       638.4 ns/op
--- BENCH: BenchmarkLimiter/wait/serial/2ns_rate/wrapped-128
    ratelimiter_test.go:104: allowed: 1,          denied: 0,           time per allow:   33.77µs
    ratelimiter_test.go:104: allowed: 100,        denied: 0,           time per allow:   1.575µs
    ratelimiter_test.go:104: allowed: 10000,      denied: 0,           time per allow:     708ns
    ratelimiter_test.go:104: allowed: 1000000,    denied: 0,           time per allow:     642ns
    ratelimiter_test.go:104: allowed: 1867640,    denied: 0,           time per allow:     638ns
BenchmarkLimiter/wait/serial/2ns_rate/mocked_timesource                        	 3688692	       332.1 ns/op
--- BENCH: BenchmarkLimiter/wait/serial/2ns_rate/mocked_timesource
    ratelimiter_test.go:104: allowed: 1,          denied: 0,           time per allow:  21.769µs
    ratelimiter_test.go:104: allowed: 100,        denied: 0,           time per allow:     461ns
    ratelimiter_test.go:104: allowed: 10000,      denied: 0,           time per allow:     283ns
    ratelimiter_test.go:104: allowed: 1000000,    denied: 0,           time per allow:     325ns
    ratelimiter_test.go:104: allowed: 3688692,    denied: 0,           time per allow:     332ns
BenchmarkLimiter/wait/serial/2ns_rate/mocked_timesource-2                      	 4148924	       289.8 ns/op
--- BENCH: BenchmarkLimiter/wait/serial/2ns_rate/mocked_timesource-2
    ratelimiter_test.go:104: allowed: 1,          denied: 0,           time per allow:   32.86µs
    ratelimiter_test.go:104: allowed: 100,        denied: 0,           time per allow:     755ns
    ratelimiter_test.go:104: allowed: 10000,      denied: 0,           time per allow:     297ns
    ratelimiter_test.go:104: allowed: 1000000,    denied: 0,           time per allow:     289ns
    ratelimiter_test.go:104: allowed: 4148924,    denied: 0,           time per allow:     289ns
BenchmarkLimiter/wait/serial/2ns_rate/mocked_timesource-4                      	 3743677	       286.0 ns/op
--- BENCH: BenchmarkLimiter/wait/serial/2ns_rate/mocked_timesource-4
    ratelimiter_test.go:104: allowed: 1,          denied: 0,           time per allow:   15.64µs
    ratelimiter_test.go:104: allowed: 100,        denied: 0,           time per allow:     413ns
    ratelimiter_test.go:104: allowed: 10000,      denied: 0,           time per allow:     327ns
    ratelimiter_test.go:104: allowed: 1000000,    denied: 0,           time per allow:     320ns
    ratelimiter_test.go:104: allowed: 3743677,    denied: 0,           time per allow:     286ns
BenchmarkLimiter/wait/serial/2ns_rate/mocked_timesource-8                      	 4091781	       293.3 ns/op
--- BENCH: BenchmarkLimiter/wait/serial/2ns_rate/mocked_timesource-8
    ratelimiter_test.go:104: allowed: 1,          denied: 0,           time per allow:   17.19µs
    ratelimiter_test.go:104: allowed: 100,        denied: 0,           time per allow:   1.066µs
    ratelimiter_test.go:104: allowed: 10000,      denied: 0,           time per allow:     304ns
    ratelimiter_test.go:104: allowed: 1000000,    denied: 0,           time per allow:     293ns
    ratelimiter_test.go:104: allowed: 4091781,    denied: 0,           time per allow:     293ns
BenchmarkLimiter/wait/serial/2ns_rate/mocked_timesource-32                     	 4138708	       286.9 ns/op
--- BENCH: BenchmarkLimiter/wait/serial/2ns_rate/mocked_timesource-32
    ratelimiter_test.go:104: allowed: 1,          denied: 0,           time per allow:  16.191µs
    ratelimiter_test.go:104: allowed: 100,        denied: 0,           time per allow:     660ns
    ratelimiter_test.go:104: allowed: 10000,      denied: 0,           time per allow:     313ns
    ratelimiter_test.go:104: allowed: 1000000,    denied: 0,           time per allow:     289ns
    ratelimiter_test.go:104: allowed: 4138708,    denied: 0,           time per allow:     286ns
BenchmarkLimiter/wait/serial/2ns_rate/mocked_timesource-128                    	 4132966	       289.9 ns/op
--- BENCH: BenchmarkLimiter/wait/serial/2ns_rate/mocked_timesource-128
    ratelimiter_test.go:104: allowed: 1,          denied: 0,           time per allow:   16.28µs
    ratelimiter_test.go:104: allowed: 100,        denied: 0,           time per allow:     598ns
    ratelimiter_test.go:104: allowed: 10000,      denied: 0,           time per allow:     284ns
    ratelimiter_test.go:104: allowed: 1000000,    denied: 0,           time per allow:     290ns
    ratelimiter_test.go:104: allowed: 4132966,    denied: 0,           time per allow:     289ns
BenchmarkLimiter/wait/serial/1µs_rate/real                                     	 1000000	      1023 ns/op
--- BENCH: BenchmarkLimiter/wait/serial/1µs_rate/real
    ratelimiter_test.go:104: allowed: 1,          denied: 0,           time per allow:   35.83µs
    ratelimiter_test.go:104: allowed: 100,        denied: 0,           time per allow:   1.053µs
    ratelimiter_test.go:104: allowed: 10000,      denied: 0,           time per allow:     955ns
    ratelimiter_test.go:104: allowed: 1000000,    denied: 0,           time per allow:   1.023µs
BenchmarkLimiter/wait/serial/1µs_rate/real-2                                   	 1000000	      1008 ns/op
--- BENCH: BenchmarkLimiter/wait/serial/1µs_rate/real-2
    ratelimiter_test.go:104: allowed: 1,          denied: 0,           time per allow:   20.22µs
    ratelimiter_test.go:104: allowed: 100,        denied: 0,           time per allow:    1.12µs
    ratelimiter_test.go:104: allowed: 10000,      denied: 0,           time per allow:     941ns
    ratelimiter_test.go:104: allowed: 1000000,    denied: 0,           time per allow:   1.008µs
BenchmarkLimiter/wait/serial/1µs_rate/real-4                                   	 1000000	      1016 ns/op
--- BENCH: BenchmarkLimiter/wait/serial/1µs_rate/real-4
    ratelimiter_test.go:104: allowed: 1,          denied: 0,           time per allow:   20.41µs
    ratelimiter_test.go:104: allowed: 100,        denied: 0,           time per allow:     842ns
    ratelimiter_test.go:104: allowed: 10000,      denied: 0,           time per allow:     910ns
    ratelimiter_test.go:104: allowed: 1000000,    denied: 0,           time per allow:   1.015µs
BenchmarkLimiter/wait/serial/1µs_rate/real-8                                   	 1000000	      1014 ns/op
--- BENCH: BenchmarkLimiter/wait/serial/1µs_rate/real-8
    ratelimiter_test.go:104: allowed: 1,          denied: 0,           time per allow:   44.66µs
    ratelimiter_test.go:104: allowed: 100,        denied: 0,           time per allow:   1.157µs
    ratelimiter_test.go:104: allowed: 10000,      denied: 0,           time per allow:   1.027µs
    ratelimiter_test.go:104: allowed: 1000000,    denied: 0,           time per allow:   1.013µs
BenchmarkLimiter/wait/serial/1µs_rate/real-32                                  	 1000000	      1016 ns/op
--- BENCH: BenchmarkLimiter/wait/serial/1µs_rate/real-32
    ratelimiter_test.go:104: allowed: 1,          denied: 0,           time per allow:   17.55µs
    ratelimiter_test.go:104: allowed: 100,        denied: 0,           time per allow:     876ns
    ratelimiter_test.go:104: allowed: 10000,      denied: 0,           time per allow:     906ns
    ratelimiter_test.go:104: allowed: 1000000,    denied: 0,           time per allow:   1.015µs
BenchmarkLimiter/wait/serial/1µs_rate/real-128                                 	 1000000	      1012 ns/op
--- BENCH: BenchmarkLimiter/wait/serial/1µs_rate/real-128
    ratelimiter_test.go:104: allowed: 1,          denied: 0,           time per allow:   19.96µs
    ratelimiter_test.go:104: allowed: 100,        denied: 0,           time per allow:   1.033µs
    ratelimiter_test.go:104: allowed: 10000,      denied: 0,           time per allow:     967ns
    ratelimiter_test.go:104: allowed: 1000000,    denied: 0,           time per allow:   1.012µs
BenchmarkLimiter/wait/serial/1µs_rate/wrapped                                  	 1000000	      1019 ns/op
--- BENCH: BenchmarkLimiter/wait/serial/1µs_rate/wrapped
    ratelimiter_test.go:104: allowed: 1,          denied: 0,           time per allow:   22.93µs
    ratelimiter_test.go:104: allowed: 100,        denied: 0,           time per allow:     732ns
    ratelimiter_test.go:104: allowed: 10000,      denied: 0,           time per allow:     1.1µs
    ratelimiter_test.go:104: allowed: 1000000,    denied: 0,           time per allow:   1.018µs
BenchmarkLimiter/wait/serial/1µs_rate/wrapped-2                                	 1000000	      1004 ns/op
--- BENCH: BenchmarkLimiter/wait/serial/1µs_rate/wrapped-2
    ratelimiter_test.go:104: allowed: 1,          denied: 0,           time per allow:   18.94µs
    ratelimiter_test.go:104: allowed: 100,        denied: 0,           time per allow:   1.028µs
    ratelimiter_test.go:104: allowed: 10000,      denied: 0,           time per allow:     955ns
    ratelimiter_test.go:104: allowed: 1000000,    denied: 0,           time per allow:   1.004µs
BenchmarkLimiter/wait/serial/1µs_rate/wrapped-4                                	 1000000	      1013 ns/op
--- BENCH: BenchmarkLimiter/wait/serial/1µs_rate/wrapped-4
    ratelimiter_test.go:104: allowed: 1,          denied: 0,           time per allow:  20.631µs
    ratelimiter_test.go:104: allowed: 100,        denied: 0,           time per allow:   1.143µs
    ratelimiter_test.go:104: allowed: 10000,      denied: 0,           time per allow:     995ns
    ratelimiter_test.go:104: allowed: 1000000,    denied: 0,           time per allow:   1.012µs
BenchmarkLimiter/wait/serial/1µs_rate/wrapped-8                                	 1000000	      1009 ns/op
--- BENCH: BenchmarkLimiter/wait/serial/1µs_rate/wrapped-8
    ratelimiter_test.go:104: allowed: 1,          denied: 0,           time per allow:   15.94µs
    ratelimiter_test.go:104: allowed: 100,        denied: 0,           time per allow:    1.05µs
    ratelimiter_test.go:104: allowed: 10000,      denied: 0,           time per allow:     959ns
    ratelimiter_test.go:104: allowed: 1000000,    denied: 0,           time per allow:   1.008µs
BenchmarkLimiter/wait/serial/1µs_rate/wrapped-32                               	 1000000	      1006 ns/op
--- BENCH: BenchmarkLimiter/wait/serial/1µs_rate/wrapped-32
    ratelimiter_test.go:104: allowed: 1,          denied: 0,           time per allow:   27.17µs
    ratelimiter_test.go:104: allowed: 100,        denied: 0,           time per allow:   1.034µs
    ratelimiter_test.go:104: allowed: 10000,      denied: 0,           time per allow:     933ns
    ratelimiter_test.go:104: allowed: 1000000,    denied: 0,           time per allow:   1.006µs
BenchmarkLimiter/wait/serial/1µs_rate/wrapped-128                              	 1000000	      1009 ns/op
--- BENCH: BenchmarkLimiter/wait/serial/1µs_rate/wrapped-128
    ratelimiter_test.go:104: allowed: 1,          denied: 0,           time per allow:   31.05µs
    ratelimiter_test.go:104: allowed: 100,        denied: 0,           time per allow:   1.166µs
    ratelimiter_test.go:104: allowed: 10000,      denied: 0,           time per allow:   1.033µs
    ratelimiter_test.go:104: allowed: 1000000,    denied: 0,           time per allow:   1.008µs
BenchmarkLimiter/wait/serial/1µs_rate/mocked_timesource                        	 3635656	       338.4 ns/op
--- BENCH: BenchmarkLimiter/wait/serial/1µs_rate/mocked_timesource
    ratelimiter_test.go:104: allowed: 1,          denied: 0,           time per allow:   15.21µs
    ratelimiter_test.go:104: allowed: 100,        denied: 0,           time per allow:     400ns
    ratelimiter_test.go:104: allowed: 10000,      denied: 0,           time per allow:     279ns
    ratelimiter_test.go:104: allowed: 1000000,    denied: 0,           time per allow:     330ns
    ratelimiter_test.go:104: allowed: 3635656,    denied: 0,           time per allow:     338ns
BenchmarkLimiter/wait/serial/1µs_rate/mocked_timesource-2                      	 4188434	       297.4 ns/op
--- BENCH: BenchmarkLimiter/wait/serial/1µs_rate/mocked_timesource-2
    ratelimiter_test.go:104: allowed: 1,          denied: 0,           time per allow:   18.67µs
    ratelimiter_test.go:104: allowed: 100,        denied: 0,           time per allow:     433ns
    ratelimiter_test.go:104: allowed: 10000,      denied: 0,           time per allow:     289ns
    ratelimiter_test.go:104: allowed: 1000000,    denied: 0,           time per allow:     286ns
    ratelimiter_test.go:104: allowed: 4188434,    denied: 0,           time per allow:     297ns
BenchmarkLimiter/wait/serial/1µs_rate/mocked_timesource-4                      	 4104416	       293.3 ns/op
--- BENCH: BenchmarkLimiter/wait/serial/1µs_rate/mocked_timesource-4
    ratelimiter_test.go:104: allowed: 1,          denied: 0,           time per allow:   18.38µs
    ratelimiter_test.go:104: allowed: 100,        denied: 0,           time per allow:     543ns
    ratelimiter_test.go:104: allowed: 10000,      denied: 0,           time per allow:     306ns
    ratelimiter_test.go:104: allowed: 1000000,    denied: 0,           time per allow:     292ns
    ratelimiter_test.go:104: allowed: 4104416,    denied: 0,           time per allow:     293ns
BenchmarkLimiter/wait/serial/1µs_rate/mocked_timesource-8                      	 3988545	       294.6 ns/op
--- BENCH: BenchmarkLimiter/wait/serial/1µs_rate/mocked_timesource-8
    ratelimiter_test.go:104: allowed: 1,          denied: 0,           time per allow:   26.91µs
    ratelimiter_test.go:104: allowed: 100,        denied: 0,           time per allow:     828ns
    ratelimiter_test.go:104: allowed: 10000,      denied: 0,           time per allow:     289ns
    ratelimiter_test.go:104: allowed: 1000000,    denied: 0,           time per allow:     300ns
    ratelimiter_test.go:104: allowed: 3988545,    denied: 0,           time per allow:     294ns
BenchmarkLimiter/wait/serial/1µs_rate/mocked_timesource-32                     	 4039422	       297.8 ns/op
--- BENCH: BenchmarkLimiter/wait/serial/1µs_rate/mocked_timesource-32
    ratelimiter_test.go:104: allowed: 1,          denied: 0,           time per allow:  16.231µs
    ratelimiter_test.go:104: allowed: 100,        denied: 0,           time per allow:     637ns
    ratelimiter_test.go:104: allowed: 10000,      denied: 0,           time per allow:     296ns
    ratelimiter_test.go:104: allowed: 1000000,    denied: 0,           time per allow:     297ns
    ratelimiter_test.go:104: allowed: 4039422,    denied: 0,           time per allow:     297ns
BenchmarkLimiter/wait/serial/1µs_rate/mocked_timesource-128                    	 4026734	       295.3 ns/op
--- BENCH: BenchmarkLimiter/wait/serial/1µs_rate/mocked_timesource-128
    ratelimiter_test.go:104: allowed: 1,          denied: 0,           time per allow:   26.13µs
    ratelimiter_test.go:104: allowed: 100,        denied: 0,           time per allow:     757ns
    ratelimiter_test.go:104: allowed: 10000,      denied: 0,           time per allow:     293ns
    ratelimiter_test.go:104: allowed: 1000000,    denied: 0,           time per allow:     297ns
    ratelimiter_test.go:104: allowed: 4026734,    denied: 0,           time per allow:     295ns
BenchmarkLimiter/wait/parallel/2ns_rate/real                                   	 1641836	       747.9 ns/op
--- BENCH: BenchmarkLimiter/wait/parallel/2ns_rate/real
    ratelimiter_test.go:126: allowed: 1,          denied: 0,           time per allow:  215.38µs
    ratelimiter_test.go:126: allowed: 100,        denied: 0,           time per allow:     960ns
    ratelimiter_test.go:126: allowed: 10000,      denied: 0,           time per allow:     701ns
    ratelimiter_test.go:126: allowed: 1000000,    denied: 0,           time per allow:     730ns
    ratelimiter_test.go:126: allowed: 1641836,    denied: 0,           time per allow:     747ns
BenchmarkLimiter/wait/parallel/2ns_rate/real-2                                 	 2477905	       550.6 ns/op
--- BENCH: BenchmarkLimiter/wait/parallel/2ns_rate/real-2
    ratelimiter_test.go:126: allowed: 1,          denied: 0,           time per allow:   62.79µs
    ratelimiter_test.go:126: allowed: 100,        denied: 0,           time per allow:   1.404µs
    ratelimiter_test.go:126: allowed: 10000,      denied: 0,           time per allow:     706ns
    ratelimiter_test.go:126: allowed: 1000000,    denied: 0,           time per allow:     484ns
    ratelimiter_test.go:126: allowed: 2477905,    denied: 0,           time per allow:     550ns
BenchmarkLimiter/wait/parallel/2ns_rate/real-4                                 	 2182782	       568.5 ns/op
--- BENCH: BenchmarkLimiter/wait/parallel/2ns_rate/real-4
    ratelimiter_test.go:126: allowed: 1,          denied: 0,           time per allow:    43.3µs
    ratelimiter_test.go:126: allowed: 100,        denied: 0,           time per allow:   1.075µs
    ratelimiter_test.go:126: allowed: 10000,      denied: 0,           time per allow:     560ns
    ratelimiter_test.go:126: allowed: 1000000,    denied: 0,           time per allow:     549ns
    ratelimiter_test.go:126: allowed: 2182782,    denied: 0,           time per allow:     568ns
BenchmarkLimiter/wait/parallel/2ns_rate/real-8                                 	 2096353	       547.8 ns/op
--- BENCH: BenchmarkLimiter/wait/parallel/2ns_rate/real-8
    ratelimiter_test.go:126: allowed: 1,          denied: 0,           time per allow:  68.171µs
    ratelimiter_test.go:126: allowed: 100,        denied: 0,           time per allow:   2.182µs
    ratelimiter_test.go:126: allowed: 10000,      denied: 0,           time per allow:     632ns
    ratelimiter_test.go:126: allowed: 1000000,    denied: 0,           time per allow:     572ns
    ratelimiter_test.go:126: allowed: 2096353,    denied: 0,           time per allow:     547ns
BenchmarkLimiter/wait/parallel/2ns_rate/real-32                                	 1453393	       700.8 ns/op
--- BENCH: BenchmarkLimiter/wait/parallel/2ns_rate/real-32
    ratelimiter_test.go:126: allowed: 1,          denied: 0,           time per allow:   73.91µs
    ratelimiter_test.go:126: allowed: 100,        denied: 0,           time per allow:   1.109µs
    ratelimiter_test.go:126: allowed: 10000,      denied: 0,           time per allow:     778ns
    ratelimiter_test.go:126: allowed: 1000000,    denied: 0,           time per allow:     825ns
    ratelimiter_test.go:126: allowed: 1453393,    denied: 0,           time per allow:     700ns
BenchmarkLimiter/wait/parallel/2ns_rate/real-128                               	 1389099	       887.9 ns/op
--- BENCH: BenchmarkLimiter/wait/parallel/2ns_rate/real-128
    ratelimiter_test.go:126: allowed: 1,          denied: 0,           time per allow:   125.3µs
    ratelimiter_test.go:126: allowed: 100,        denied: 0,           time per allow:   1.857µs
    ratelimiter_test.go:126: allowed: 10000,      denied: 0,           time per allow:     842ns
    ratelimiter_test.go:126: allowed: 1000000,    denied: 0,           time per allow:     863ns
    ratelimiter_test.go:126: allowed: 1389099,    denied: 0,           time per allow:     887ns
BenchmarkLimiter/wait/parallel/2ns_rate/wrapped                                	 1477804	       777.2 ns/op
--- BENCH: BenchmarkLimiter/wait/parallel/2ns_rate/wrapped
    ratelimiter_test.go:126: allowed: 1,          denied: 0,           time per allow:  107.82µs
    ratelimiter_test.go:126: allowed: 100,        denied: 0,           time per allow:     910ns
    ratelimiter_test.go:126: allowed: 10000,      denied: 0,           time per allow:   1.041µs
    ratelimiter_test.go:126: allowed: 1000000,    denied: 0,           time per allow:     811ns
    ratelimiter_test.go:126: allowed: 1477804,    denied: 0,           time per allow:     777ns
BenchmarkLimiter/wait/parallel/2ns_rate/wrapped-2                              	 1919418	       680.3 ns/op
--- BENCH: BenchmarkLimiter/wait/parallel/2ns_rate/wrapped-2
    ratelimiter_test.go:126: allowed: 1,          denied: 0,           time per allow:   38.97µs
    ratelimiter_test.go:126: allowed: 100,        denied: 0,           time per allow:   1.394µs
    ratelimiter_test.go:126: allowed: 10000,      denied: 0,           time per allow:     791ns
    ratelimiter_test.go:126: allowed: 1000000,    denied: 0,           time per allow:     625ns
    ratelimiter_test.go:126: allowed: 1919418,    denied: 0,           time per allow:     680ns
BenchmarkLimiter/wait/parallel/2ns_rate/wrapped-4                              	 1944643	       639.7 ns/op
--- BENCH: BenchmarkLimiter/wait/parallel/2ns_rate/wrapped-4
    ratelimiter_test.go:126: allowed: 1,          denied: 0,           time per allow:   44.25µs
    ratelimiter_test.go:126: allowed: 100,        denied: 0,           time per allow:    2.31µs
    ratelimiter_test.go:126: allowed: 10000,      denied: 0,           time per allow:     745ns
    ratelimiter_test.go:126: allowed: 1000000,    denied: 0,           time per allow:     617ns
    ratelimiter_test.go:126: allowed: 1944643,    denied: 0,           time per allow:     639ns
BenchmarkLimiter/wait/parallel/2ns_rate/wrapped-8                              	 1550791	       712.7 ns/op
--- BENCH: BenchmarkLimiter/wait/parallel/2ns_rate/wrapped-8
    ratelimiter_test.go:126: allowed: 1,          denied: 0,           time per allow:      46µs
    ratelimiter_test.go:126: allowed: 100,        denied: 0,           time per allow:   1.594µs
    ratelimiter_test.go:126: allowed: 10000,      denied: 0,           time per allow:     677ns
    ratelimiter_test.go:126: allowed: 1000000,    denied: 0,           time per allow:     773ns
    ratelimiter_test.go:126: allowed: 1550791,    denied: 0,           time per allow:     712ns
BenchmarkLimiter/wait/parallel/2ns_rate/wrapped-32                             	 1000000	      1067 ns/op
--- BENCH: BenchmarkLimiter/wait/parallel/2ns_rate/wrapped-32
    ratelimiter_test.go:126: allowed: 1,          denied: 0,           time per allow:   69.29µs
    ratelimiter_test.go:126: allowed: 100,        denied: 0,           time per allow:   2.906µs
    ratelimiter_test.go:126: allowed: 10000,      denied: 0,           time per allow:     996ns
    ratelimiter_test.go:126: allowed: 1000000,    denied: 0,           time per allow:   1.067µs
BenchmarkLimiter/wait/parallel/2ns_rate/wrapped-128                            	  849644	      1353 ns/op
--- BENCH: BenchmarkLimiter/wait/parallel/2ns_rate/wrapped-128
    ratelimiter_test.go:126: allowed: 1,          denied: 0,           time per allow:  133.88µs
    ratelimiter_test.go:126: allowed: 100,        denied: 0,           time per allow:   2.976µs
    ratelimiter_test.go:126: allowed: 10000,      denied: 0,           time per allow:   1.409µs
    ratelimiter_test.go:126: allowed: 849644,     denied: 0,           time per allow:   1.352µs
BenchmarkLimiter/wait/parallel/2ns_rate/mocked_timesource                      	 2831469	       434.0 ns/op
--- BENCH: BenchmarkLimiter/wait/parallel/2ns_rate/mocked_timesource
    ratelimiter_test.go:126: allowed: 1,          denied: 0,           time per allow:  153.39µs
    ratelimiter_test.go:126: allowed: 100,        denied: 0,           time per allow:     548ns
    ratelimiter_test.go:126: allowed: 10000,      denied: 0,           time per allow:     277ns
    ratelimiter_test.go:126: allowed: 1000000,    denied: 0,           time per allow:     423ns
    ratelimiter_test.go:126: allowed: 2831469,    denied: 0,           time per allow:     433ns
BenchmarkLimiter/wait/parallel/2ns_rate/mocked_timesource-2                    	 2492312	       495.5 ns/op
--- BENCH: BenchmarkLimiter/wait/parallel/2ns_rate/mocked_timesource-2
    ratelimiter_test.go:126: allowed: 1,          denied: 0,           time per allow:   79.18µs
    ratelimiter_test.go:126: allowed: 100,        denied: 0,           time per allow:   1.348µs
    ratelimiter_test.go:126: allowed: 10000,      denied: 0,           time per allow:     455ns
    ratelimiter_test.go:126: allowed: 1000000,    denied: 0,           time per allow:     481ns
    ratelimiter_test.go:126: allowed: 2492312,    denied: 0,           time per allow:     495ns
BenchmarkLimiter/wait/parallel/2ns_rate/mocked_timesource-4                    	 2162055	       554.9 ns/op
--- BENCH: BenchmarkLimiter/wait/parallel/2ns_rate/mocked_timesource-4
    ratelimiter_test.go:126: allowed: 1,          denied: 0,           time per allow:   79.88µs
    ratelimiter_test.go:126: allowed: 100,        denied: 0,           time per allow:   1.512µs
    ratelimiter_test.go:126: allowed: 10000,      denied: 0,           time per allow:     420ns
    ratelimiter_test.go:126: allowed: 1000000,    denied: 0,           time per allow:     554ns
    ratelimiter_test.go:126: allowed: 2162055,    denied: 0,           time per allow:     554ns
BenchmarkLimiter/wait/parallel/2ns_rate/mocked_timesource-8                    	 2619050	       466.6 ns/op
--- BENCH: BenchmarkLimiter/wait/parallel/2ns_rate/mocked_timesource-8
    ratelimiter_test.go:126: allowed: 1,          denied: 0,           time per allow:   56.45µs
    ratelimiter_test.go:126: allowed: 100,        denied: 0,           time per allow:   1.923µs
    ratelimiter_test.go:126: allowed: 10000,      denied: 0,           time per allow:     758ns
    ratelimiter_test.go:126: allowed: 1000000,    denied: 0,           time per allow:     574ns
    ratelimiter_test.go:126: allowed: 2089342,    denied: 0,           time per allow:     458ns
    ratelimiter_test.go:126: allowed: 2619050,    denied: 0,           time per allow:     466ns
BenchmarkLimiter/wait/parallel/2ns_rate/mocked_timesource-32                   	 2204841	       507.7 ns/op
--- BENCH: BenchmarkLimiter/wait/parallel/2ns_rate/mocked_timesource-32
    ratelimiter_test.go:126: allowed: 1,          denied: 0,           time per allow:   86.75µs
    ratelimiter_test.go:126: allowed: 100,        denied: 0,           time per allow:   3.122µs
    ratelimiter_test.go:126: allowed: 10000,      denied: 0,           time per allow:     600ns
    ratelimiter_test.go:126: allowed: 1000000,    denied: 0,           time per allow:     544ns
    ratelimiter_test.go:126: allowed: 2204841,    denied: 0,           time per allow:     507ns
BenchmarkLimiter/wait/parallel/2ns_rate/mocked_timesource-128                  	 2197669	       535.5 ns/op
--- BENCH: BenchmarkLimiter/wait/parallel/2ns_rate/mocked_timesource-128
    ratelimiter_test.go:126: allowed: 1,          denied: 0,           time per allow:  169.63µs
    ratelimiter_test.go:126: allowed: 100,        denied: 0,           time per allow:   6.227µs
    ratelimiter_test.go:126: allowed: 10000,      denied: 0,           time per allow:     566ns
    ratelimiter_test.go:126: allowed: 1000000,    denied: 0,           time per allow:     546ns
    ratelimiter_test.go:126: allowed: 2197669,    denied: 0,           time per allow:     535ns
BenchmarkLimiter/wait/parallel/1µs_rate/real                                   	 1000000	      1040 ns/op
--- BENCH: BenchmarkLimiter/wait/parallel/1µs_rate/real
    ratelimiter_test.go:126: allowed: 1,          denied: 0,           time per allow:   162.4µs
    ratelimiter_test.go:126: allowed: 100,        denied: 0,           time per allow:     933ns
    ratelimiter_test.go:126: allowed: 10000,      denied: 0,           time per allow:     931ns
    ratelimiter_test.go:126: allowed: 1000000,    denied: 0,           time per allow:   1.039µs
BenchmarkLimiter/wait/parallel/1µs_rate/real-2                                 	 1332808	       910.6 ns/op
--- BENCH: BenchmarkLimiter/wait/parallel/1µs_rate/real-2
    ratelimiter_test.go:126: allowed: 1,          denied: 0,           time per allow:   49.64µs
    ratelimiter_test.go:126: allowed: 100,        denied: 0,           time per allow:   1.089µs
    ratelimiter_test.go:126: allowed: 10000,      denied: 0,           time per allow:     818ns
    ratelimiter_test.go:126: allowed: 1000000,    denied: 0,           time per allow:     900ns
    ratelimiter_test.go:126: allowed: 1332808,    denied: 0,           time per allow:     910ns
BenchmarkLimiter/wait/parallel/1µs_rate/real-4                                 	 2403193	       519.8 ns/op
--- BENCH: BenchmarkLimiter/wait/parallel/1µs_rate/real-4
    ratelimiter_test.go:126: allowed: 1,          denied: 0,           time per allow:    29.5µs
    ratelimiter_test.go:126: allowed: 100,        denied: 0,           time per allow:    1.42µs
    ratelimiter_test.go:126: allowed: 10000,      denied: 0,           time per allow:     494ns
    ratelimiter_test.go:126: allowed: 1000000,    denied: 0,           time per allow:     499ns
    ratelimiter_test.go:126: allowed: 2403193,    denied: 0,           time per allow:     519ns
BenchmarkLimiter/wait/parallel/1µs_rate/real-8                                 	 2279982	       559.8 ns/op
--- BENCH: BenchmarkLimiter/wait/parallel/1µs_rate/real-8
    ratelimiter_test.go:126: allowed: 1,          denied: 0,           time per allow:   47.41µs
    ratelimiter_test.go:126: allowed: 100,        denied: 0,           time per allow:   1.329µs
    ratelimiter_test.go:126: allowed: 10000,      denied: 0,           time per allow:     506ns
    ratelimiter_test.go:126: allowed: 1000000,    denied: 0,           time per allow:     526ns
    ratelimiter_test.go:126: allowed: 2279982,    denied: 0,           time per allow:     559ns
BenchmarkLimiter/wait/parallel/1µs_rate/real-32                                	 1610323	       721.5 ns/op
--- BENCH: BenchmarkLimiter/wait/parallel/1µs_rate/real-32
    ratelimiter_test.go:126: allowed: 1,          denied: 0,           time per allow:   59.45µs
    ratelimiter_test.go:126: allowed: 100,        denied: 0,           time per allow:   2.085µs
    ratelimiter_test.go:126: allowed: 10000,      denied: 0,           time per allow:     726ns
    ratelimiter_test.go:126: allowed: 1000000,    denied: 0,           time per allow:     745ns
    ratelimiter_test.go:126: allowed: 1610323,    denied: 0,           time per allow:     721ns
BenchmarkLimiter/wait/parallel/1µs_rate/real-128                               	 1337101	       939.4 ns/op
--- BENCH: BenchmarkLimiter/wait/parallel/1µs_rate/real-128
    ratelimiter_test.go:126: allowed: 1,          denied: 0,           time per allow: 155.431µs
    ratelimiter_test.go:126: allowed: 100,        denied: 0,           time per allow:   1.463µs
    ratelimiter_test.go:126: allowed: 10000,      denied: 0,           time per allow:     797ns
    ratelimiter_test.go:126: allowed: 1000000,    denied: 0,           time per allow:     897ns
    ratelimiter_test.go:126: allowed: 1337101,    denied: 0,           time per allow:     939ns
BenchmarkLimiter/wait/parallel/1µs_rate/wrapped                                	 1000000	      1022 ns/op
--- BENCH: BenchmarkLimiter/wait/parallel/1µs_rate/wrapped
    ratelimiter_test.go:126: allowed: 1,          denied: 0,           time per allow:  180.59µs
    ratelimiter_test.go:126: allowed: 100,        denied: 0,           time per allow:   1.005µs
    ratelimiter_test.go:126: allowed: 10000,      denied: 0,           time per allow:   1.039µs
    ratelimiter_test.go:126: allowed: 1000000,    denied: 0,           time per allow:   1.022µs
BenchmarkLimiter/wait/parallel/1µs_rate/wrapped-2                              	 1000000	      1002 ns/op
--- BENCH: BenchmarkLimiter/wait/parallel/1µs_rate/wrapped-2
    ratelimiter_test.go:126: allowed: 1,          denied: 0,           time per allow:    44.1µs
    ratelimiter_test.go:126: allowed: 100,        denied: 0,           time per allow:   1.206µs
    ratelimiter_test.go:126: allowed: 10000,      denied: 0,           time per allow:     959ns
    ratelimiter_test.go:126: allowed: 1000000,    denied: 0,           time per allow:   1.002µs
BenchmarkLimiter/wait/parallel/1µs_rate/wrapped-4                              	 1000000	      1006 ns/op
--- BENCH: BenchmarkLimiter/wait/parallel/1µs_rate/wrapped-4
    ratelimiter_test.go:126: allowed: 1,          denied: 0,           time per allow:   54.86µs
    ratelimiter_test.go:126: allowed: 100,        denied: 0,           time per allow:   1.566µs
    ratelimiter_test.go:126: allowed: 10000,      denied: 0,           time per allow:     907ns
    ratelimiter_test.go:126: allowed: 1000000,    denied: 0,           time per allow:   1.005µs
BenchmarkLimiter/wait/parallel/1µs_rate/wrapped-8                              	 1000000	      1002 ns/op
--- BENCH: BenchmarkLimiter/wait/parallel/1µs_rate/wrapped-8
    ratelimiter_test.go:126: allowed: 1,          denied: 0,           time per allow:   79.02µs
    ratelimiter_test.go:126: allowed: 100,        denied: 0,           time per allow:   1.866µs
    ratelimiter_test.go:126: allowed: 10000,      denied: 0,           time per allow:     905ns
    ratelimiter_test.go:126: allowed: 1000000,    denied: 0,           time per allow:   1.002µs
BenchmarkLimiter/wait/parallel/1µs_rate/wrapped-32                             	 1000000	      1020 ns/op
--- BENCH: BenchmarkLimiter/wait/parallel/1µs_rate/wrapped-32
    ratelimiter_test.go:126: allowed: 1,          denied: 0,           time per allow:   62.45µs
    ratelimiter_test.go:126: allowed: 100,        denied: 0,           time per allow:    2.83µs
    ratelimiter_test.go:126: allowed: 10000,      denied: 0,           time per allow:   1.004µs
    ratelimiter_test.go:126: allowed: 1000000,    denied: 0,           time per allow:    1.02µs
BenchmarkLimiter/wait/parallel/1µs_rate/wrapped-128                            	 1000000	      1048 ns/op
--- BENCH: BenchmarkLimiter/wait/parallel/1µs_rate/wrapped-128
    ratelimiter_test.go:126: allowed: 1,          denied: 0,           time per allow:  102.36µs
    ratelimiter_test.go:126: allowed: 100,        denied: 0,           time per allow:   2.575µs
    ratelimiter_test.go:126: allowed: 10000,      denied: 0,           time per allow:     981ns
    ratelimiter_test.go:126: allowed: 1000000,    denied: 0,           time per allow:   1.047µs
BenchmarkLimiter/wait/parallel/1µs_rate/mocked_timesource                      	 3599614	       334.7 ns/op
--- BENCH: BenchmarkLimiter/wait/parallel/1µs_rate/mocked_timesource
    ratelimiter_test.go:126: allowed: 1,          denied: 0,           time per allow:  138.13µs
    ratelimiter_test.go:126: allowed: 100,        denied: 0,           time per allow:     747ns
    ratelimiter_test.go:126: allowed: 10000,      denied: 0,           time per allow:     296ns
    ratelimiter_test.go:126: allowed: 1000000,    denied: 0,           time per allow:     333ns
    ratelimiter_test.go:126: allowed: 3599614,    denied: 0,           time per allow:     334ns
BenchmarkLimiter/wait/parallel/1µs_rate/mocked_timesource-2                    	 3480087	       342.6 ns/op
--- BENCH: BenchmarkLimiter/wait/parallel/1µs_rate/mocked_timesource-2
    ratelimiter_test.go:126: allowed: 1,          denied: 0,           time per allow:   53.68µs
    ratelimiter_test.go:126: allowed: 100,        denied: 0,           time per allow:     942ns
    ratelimiter_test.go:126: allowed: 10000,      denied: 0,           time per allow:     367ns
    ratelimiter_test.go:126: allowed: 1000000,    denied: 0,           time per allow:     344ns
    ratelimiter_test.go:126: allowed: 3480087,    denied: 0,           time per allow:     342ns
BenchmarkLimiter/wait/parallel/1µs_rate/mocked_timesource-4                    	 2958454	       377.0 ns/op
--- BENCH: BenchmarkLimiter/wait/parallel/1µs_rate/mocked_timesource-4
    ratelimiter_test.go:126: allowed: 1,          denied: 0,           time per allow:    48.6µs
    ratelimiter_test.go:126: allowed: 100,        denied: 0,           time per allow:     900ns
    ratelimiter_test.go:126: allowed: 10000,      denied: 0,           time per allow:     394ns
    ratelimiter_test.go:126: allowed: 1000000,    denied: 0,           time per allow:     405ns
    ratelimiter_test.go:126: allowed: 2958454,    denied: 0,           time per allow:     377ns
BenchmarkLimiter/wait/parallel/1µs_rate/mocked_timesource-8                    	 2739573	       463.8 ns/op
--- BENCH: BenchmarkLimiter/wait/parallel/1µs_rate/mocked_timesource-8
    ratelimiter_test.go:126: allowed: 1,          denied: 0,           time per allow:   32.93µs
    ratelimiter_test.go:126: allowed: 100,        denied: 0,           time per allow:     765ns
    ratelimiter_test.go:126: allowed: 10000,      denied: 0,           time per allow:     459ns
    ratelimiter_test.go:126: allowed: 1000000,    denied: 0,           time per allow:     438ns
    ratelimiter_test.go:126: allowed: 2739573,    denied: 0,           time per allow:     463ns
BenchmarkLimiter/wait/parallel/1µs_rate/mocked_timesource-32                   	 2460535	       497.2 ns/op
--- BENCH: BenchmarkLimiter/wait/parallel/1µs_rate/mocked_timesource-32
    ratelimiter_test.go:126: allowed: 1,          denied: 0,           time per allow:   96.85µs
    ratelimiter_test.go:126: allowed: 100,        denied: 0,           time per allow:   3.075µs
    ratelimiter_test.go:126: allowed: 10000,      denied: 0,           time per allow:     646ns
    ratelimiter_test.go:126: allowed: 1000000,    denied: 0,           time per allow:     487ns
    ratelimiter_test.go:126: allowed: 2460535,    denied: 0,           time per allow:     497ns
BenchmarkLimiter/wait/parallel/1µs_rate/mocked_timesource-128                  	 2403055	       452.0 ns/op
--- BENCH: BenchmarkLimiter/wait/parallel/1µs_rate/mocked_timesource-128
    ratelimiter_test.go:126: allowed: 1,          denied: 0,           time per allow:    95.2µs
    ratelimiter_test.go:126: allowed: 100,        denied: 0,           time per allow:   2.152µs
    ratelimiter_test.go:126: allowed: 10000,      denied: 0,           time per allow:     475ns
    ratelimiter_test.go:126: allowed: 1000000,    denied: 0,           time per allow:     499ns
    ratelimiter_test.go:126: allowed: 2403055,    denied: 0,           time per allow:     451ns
PASS
ok  	github.com/uber/cadence/common/clock	237.188s
