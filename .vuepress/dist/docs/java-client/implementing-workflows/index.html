<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Implementing workflows | Cadence</title>
    <meta name="generator" content="VuePress 1.5.0">
    <link rel="icon" href="/img/favicon.ico">
    <meta name="description" content="">
    <link rel="preload" href="/assets/css/0.styles.fd7ad33c.css" as="style"><link rel="preload" href="/assets/js/app.e0d7f476.js" as="script"><link rel="preload" href="/assets/js/2.dd3d8628.js" as="script"><link rel="preload" href="/assets/js/37.099e6b5f.js" as="script"><link rel="prefetch" href="/assets/js/10.0b2d2791.js"><link rel="prefetch" href="/assets/js/11.4ce72a83.js"><link rel="prefetch" href="/assets/js/12.d47dbecb.js"><link rel="prefetch" href="/assets/js/13.3ed52e95.js"><link rel="prefetch" href="/assets/js/14.46a875f6.js"><link rel="prefetch" href="/assets/js/15.9da16bde.js"><link rel="prefetch" href="/assets/js/16.98c5ba72.js"><link rel="prefetch" href="/assets/js/17.a4c92ac6.js"><link rel="prefetch" href="/assets/js/18.c698e8c4.js"><link rel="prefetch" href="/assets/js/19.58de9c75.js"><link rel="prefetch" href="/assets/js/20.bc8a1d44.js"><link rel="prefetch" href="/assets/js/21.d125f350.js"><link rel="prefetch" href="/assets/js/22.f831f8b8.js"><link rel="prefetch" href="/assets/js/23.99fce1e8.js"><link rel="prefetch" href="/assets/js/24.52e71e23.js"><link rel="prefetch" href="/assets/js/25.f8d2a54f.js"><link rel="prefetch" href="/assets/js/26.650d0fd1.js"><link rel="prefetch" href="/assets/js/27.6debea1f.js"><link rel="prefetch" href="/assets/js/28.bb73c534.js"><link rel="prefetch" href="/assets/js/29.117f1aae.js"><link rel="prefetch" href="/assets/js/3.faccf4e7.js"><link rel="prefetch" href="/assets/js/30.8ffdbef7.js"><link rel="prefetch" href="/assets/js/31.2cd48965.js"><link rel="prefetch" href="/assets/js/32.4f9a2eba.js"><link rel="prefetch" href="/assets/js/33.ef44d26d.js"><link rel="prefetch" href="/assets/js/34.19f9c444.js"><link rel="prefetch" href="/assets/js/35.46b53fe2.js"><link rel="prefetch" href="/assets/js/36.d2924185.js"><link rel="prefetch" href="/assets/js/38.7d1c9956.js"><link rel="prefetch" href="/assets/js/39.85f9a591.js"><link rel="prefetch" href="/assets/js/4.a405f1b1.js"><link rel="prefetch" href="/assets/js/40.add2ce37.js"><link rel="prefetch" href="/assets/js/41.f579470d.js"><link rel="prefetch" href="/assets/js/42.f0548857.js"><link rel="prefetch" href="/assets/js/43.ebad2133.js"><link rel="prefetch" href="/assets/js/44.8feef7d1.js"><link rel="prefetch" href="/assets/js/45.b3d4a4ff.js"><link rel="prefetch" href="/assets/js/46.8066d1ce.js"><link rel="prefetch" href="/assets/js/47.e039ac2e.js"><link rel="prefetch" href="/assets/js/48.17dde3a3.js"><link rel="prefetch" href="/assets/js/49.a2236461.js"><link rel="prefetch" href="/assets/js/5.194e4383.js"><link rel="prefetch" href="/assets/js/50.ae5a71ab.js"><link rel="prefetch" href="/assets/js/51.f0dbe05e.js"><link rel="prefetch" href="/assets/js/52.25efbe8c.js"><link rel="prefetch" href="/assets/js/53.63f84923.js"><link rel="prefetch" href="/assets/js/54.ec3db2c7.js"><link rel="prefetch" href="/assets/js/55.0002b74f.js"><link rel="prefetch" href="/assets/js/56.d63eb245.js"><link rel="prefetch" href="/assets/js/57.5e79509f.js"><link rel="prefetch" href="/assets/js/58.6e9c75c4.js"><link rel="prefetch" href="/assets/js/59.58ec2030.js"><link rel="prefetch" href="/assets/js/6.21bb7cd5.js"><link rel="prefetch" href="/assets/js/60.8f25bef3.js"><link rel="prefetch" href="/assets/js/61.1657b722.js"><link rel="prefetch" href="/assets/js/62.ba11551d.js"><link rel="prefetch" href="/assets/js/63.994c139b.js"><link rel="prefetch" href="/assets/js/64.7947014d.js"><link rel="prefetch" href="/assets/js/65.33ef8407.js"><link rel="prefetch" href="/assets/js/66.88b6a1dd.js"><link rel="prefetch" href="/assets/js/67.f9058d1f.js"><link rel="prefetch" href="/assets/js/7.dfe4151d.js"><link rel="prefetch" href="/assets/js/8.901eddc6.js"><link rel="prefetch" href="/assets/js/9.29283cb2.js">
    <link rel="stylesheet" href="/assets/css/0.styles.fd7ad33c.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><img src="/img/logo-white.svg" alt="Cadence" class="logo"> <span class="site-name can-hide">Cadence</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/docs/" class="nav-link router-link-active">
  Docs
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Client" class="dropdown-title"><span class="title">Client</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="https://www.javadoc.io/doc/com.uber.cadence/cadence-client" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Java Docs
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li class="dropdown-item"><!----> <a href="https://mvnrepository.com/artifact/com.uber.cadence/cadence-client" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Java Client
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li class="dropdown-item"><!----> <a href="https://godoc.org/go.uber.org/cadence" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Go Docs
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li class="dropdown-item"><!----> <a href="https://github.com/uber-go/cadence-client/releases/latest" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Go Client
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Community" class="dropdown-title"><span class="title">Community</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="https://join.slack.com/t/uber-cadence/shared_invite/zt-dvjoiacm-1U2UM4R4mMxKhaRogEx_OQ" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Slack
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li class="dropdown-item"><!----> <a href="https://stackoverflow.com/questions/tagged/cadence-workflow" target="_blank" rel="noopener noreferrer" class="nav-link external">
  StackOverflow
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="GitHub" class="dropdown-title"><span class="title">GitHub</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="https://github.com/uber/cadence" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Cadence Service and CLI
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li class="dropdown-item"><!----> <a href="https://github.com/uber-go/cadence-client" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Cadence Go Client
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li class="dropdown-item"><!----> <a href="https://github.com/uber-common/cadence-samples" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Cadence Go Client Samples
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li class="dropdown-item"><!----> <a href="https://github.com/uber-java/cadence-client" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Cadence Java Client
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li class="dropdown-item"><!----> <a href="https://github.com/uber/cadence-java-samples" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Cadence Java Client Samples
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li class="dropdown-item"><!----> <a href="https://github.com/uber/cadence-web" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Cadence Web UI
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li></ul></div></div><div class="nav-item"><a href="https://hub.docker.com/r/ubercadence/server" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Docker
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/docs/" class="nav-link router-link-active">
  Docs
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Client" class="dropdown-title"><span class="title">Client</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="https://www.javadoc.io/doc/com.uber.cadence/cadence-client" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Java Docs
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li class="dropdown-item"><!----> <a href="https://mvnrepository.com/artifact/com.uber.cadence/cadence-client" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Java Client
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li class="dropdown-item"><!----> <a href="https://godoc.org/go.uber.org/cadence" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Go Docs
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li class="dropdown-item"><!----> <a href="https://github.com/uber-go/cadence-client/releases/latest" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Go Client
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Community" class="dropdown-title"><span class="title">Community</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="https://join.slack.com/t/uber-cadence/shared_invite/zt-dvjoiacm-1U2UM4R4mMxKhaRogEx_OQ" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Slack
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li class="dropdown-item"><!----> <a href="https://stackoverflow.com/questions/tagged/cadence-workflow" target="_blank" rel="noopener noreferrer" class="nav-link external">
  StackOverflow
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="GitHub" class="dropdown-title"><span class="title">GitHub</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="https://github.com/uber/cadence" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Cadence Service and CLI
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li class="dropdown-item"><!----> <a href="https://github.com/uber-go/cadence-client" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Cadence Go Client
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li class="dropdown-item"><!----> <a href="https://github.com/uber-common/cadence-samples" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Cadence Go Client Samples
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li class="dropdown-item"><!----> <a href="https://github.com/uber-java/cadence-client" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Cadence Java Client
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li class="dropdown-item"><!----> <a href="https://github.com/uber/cadence-java-samples" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Cadence Java Client Samples
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li class="dropdown-item"><!----> <a href="https://github.com/uber/cadence-web" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Cadence Web UI
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li></ul></div></div><div class="nav-item"><a href="https://hub.docker.com/r/ubercadence/server" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Docker
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div> <!----></nav>  <ul class="sidebar-links"><li><a href="/docs/" class="sidebar-link">Cadence</a></li><li><section class="sidebar-group collapsable depth-0"><a href="/docs/02-use-cases" class="sidebar-heading clickable"><span>Use cases</span> <span class="arrow right"></span></a> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><a href="/docs/03-concepts" class="sidebar-heading clickable"><span>Concepts</span> <span class="arrow right"></span></a> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><a href="/docs/04-video-tutorials" class="sidebar-heading clickable"><span>Tutorials</span> <span class="arrow right"></span></a> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><a href="/docs/05-java-client" class="sidebar-heading clickable open"><span>Java client</span> <span class="arrow down"></span></a> <ul class="sidebar-links sidebar-group-items"><li><a href="/docs/java-client/" class="sidebar-link">Introduction</a></li><li><a href="/docs/java-client/quick-start/" class="sidebar-link">Quick start</a></li><li><a href="/docs/java-client/workflow-interface/" class="sidebar-link">Workflow interface</a></li><li><a href="/docs/java-client/implementing-workflows/" class="active sidebar-link">Implementing workflows</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/docs/java-client/implementing-workflows/#calling-activities" class="sidebar-link">Calling Activities</a></li><li class="sidebar-sub-header"><a href="/docs/java-client/implementing-workflows/#calling-activities-asynchronously" class="sidebar-link">Calling Activities Asynchronously</a></li><li class="sidebar-sub-header"><a href="/docs/java-client/implementing-workflows/#child-workflows" class="sidebar-link">Child Workflows</a></li><li class="sidebar-sub-header"><a href="/docs/java-client/implementing-workflows/#workflow-implementation-constraints" class="sidebar-link">Workflow Implementation Constraints</a></li></ul></li><li><a href="/docs/java-client/starting-workflow-executions/" class="sidebar-link">Starting workflows</a></li><li><a href="/docs/java-client/activity-interface/" class="sidebar-link">Activity interface</a></li><li><a href="/docs/java-client/implementing-activities/" class="sidebar-link">Implementing activities</a></li><li><a href="/docs/java-client/versioning/" class="sidebar-link">Versioning</a></li><li><a href="/docs/java-client/distributed-cron/" class="sidebar-link">Distributed CRON</a></li></ul></section></li><li><section class="sidebar-group collapsable depth-0"><a href="/docs/06-go-client" class="sidebar-heading clickable"><span>Go client</span> <span class="arrow right"></span></a> <!----></section></li><li><a href="/docs/cli/" class="sidebar-link">Command line interface</a></li><li><section class="sidebar-group collapsable depth-0"><a href="/docs/08-about" class="sidebar-heading clickable"><span>About</span> <span class="arrow right"></span></a> <!----></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="implementing-workflows"><a href="#implementing-workflows" class="header-anchor">#</a> Implementing workflows</h1> <p>A :workflow: implementation implements a :workflow: interface. Each time a new :workflow_execution: is started,
a new instance of the :workflow: implementation object is created. Then, one of the methods
(depending on which :workflow: type has been started) annotated with <code>@WorkflowMethod</code> is invoked. As soon as this method
returns, the :workflow_execution: is closed. While :workflow_execution: is open, it can receive calls to :signal: and :query: methods.
No additional calls to :workflow: methods are allowed. The :workflow: object is stateful, so :query: and :signal: methods
can communicate with the other parts of the :workflow: through :workflow: object fields.</p> <h2 id="calling-activities"><a href="#calling-activities" class="header-anchor">#</a> Calling Activities</h2> <p><code>Workflow.newActivityStub</code> returns a client-side stub that implements an :activity: interface.
It takes :activity: type and :activity: options as arguments. :activity:Activity: options are needed only if some of the required
timeouts are not specified through the <code>@ActivityMethod</code> annotation.</p> <p>Calling a method on this interface invokes an :activity: that implements this method.
An :activity: invocation synchronously blocks until the :activity: completes, fails, or times out. Even if :activity:
execution takes a few months, the :workflow: code still sees it as a single synchronous invocation.
It doesn't matter what happens to the processes that host the :workflow:. The business logic code
just sees a single method call.</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">FileProcessingWorkflowImpl</span> <span class="token keyword">implements</span> <span class="token class-name">FileProcessingWorkflow</span> <span class="token punctuation">{</span>

    <span class="token keyword">private</span> <span class="token keyword">final</span> <span class="token class-name">FileProcessingActivities</span> activities<span class="token punctuation">;</span>

    <span class="token keyword">public</span> <span class="token class-name">FileProcessingWorkflowImpl</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>activities <span class="token operator">=</span> <span class="token class-name">Workflow</span><span class="token punctuation">.</span><span class="token function">newActivityStub</span><span class="token punctuation">(</span><span class="token class-name">FileProcessingActivities</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">processFile</span><span class="token punctuation">(</span><span class="token class-name">Arguments</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">String</span> localName <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
        <span class="token class-name">String</span> processedName <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
        <span class="token keyword">try</span> <span class="token punctuation">{</span>
            localName <span class="token operator">=</span> activities<span class="token punctuation">.</span><span class="token function">download</span><span class="token punctuation">(</span>args<span class="token punctuation">.</span><span class="token function">getSourceBucketName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> args<span class="token punctuation">.</span><span class="token function">getSourceFilename</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            processedName <span class="token operator">=</span> activities<span class="token punctuation">.</span><span class="token function">processFile</span><span class="token punctuation">(</span>localName<span class="token punctuation">)</span><span class="token punctuation">;</span>
            activities<span class="token punctuation">.</span><span class="token function">upload</span><span class="token punctuation">(</span>args<span class="token punctuation">.</span><span class="token function">getTargetBucketName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> args<span class="token punctuation">.</span><span class="token function">getTargetFilename</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> processedName<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span> <span class="token keyword">finally</span> <span class="token punctuation">{</span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span>localName <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token comment">// File was downloaded.</span>
                activities<span class="token punctuation">.</span><span class="token function">deleteLocalFile</span><span class="token punctuation">(</span>localName<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span>processedName <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token comment">// File was processed.</span>
                activities<span class="token punctuation">.</span><span class="token function">deleteLocalFile</span><span class="token punctuation">(</span>processedName<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
    <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
<span class="token punctuation">}</span>
</code></pre></div><p>If different :activity:activities: need different options, like timeouts or a :task_list:, multiple client-side stubs can be created
with different options.</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token class-name">FileProcessingWorkflowImpl</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token class-name">ActivityOptions</span> options1 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ActivityOptions</span><span class="token punctuation">.</span><span class="token class-name">Builder</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
             <span class="token punctuation">.</span><span class="token function">setTaskList</span><span class="token punctuation">(</span><span class="token string">&quot;taskList1&quot;</span><span class="token punctuation">)</span>
             <span class="token punctuation">.</span><span class="token function">build</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>store1 <span class="token operator">=</span> <span class="token class-name">Workflow</span><span class="token punctuation">.</span><span class="token function">newActivityStub</span><span class="token punctuation">(</span><span class="token class-name">FileProcessingActivities</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">,</span> options1<span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token class-name">ActivityOptions</span> options2 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ActivityOptions</span><span class="token punctuation">.</span><span class="token class-name">Builder</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
             <span class="token punctuation">.</span><span class="token function">setTaskList</span><span class="token punctuation">(</span><span class="token string">&quot;taskList2&quot;</span><span class="token punctuation">)</span>
             <span class="token punctuation">.</span><span class="token function">build</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>store2 <span class="token operator">=</span> <span class="token class-name">Workflow</span><span class="token punctuation">.</span><span class="token function">newActivityStub</span><span class="token punctuation">(</span><span class="token class-name">FileProcessingActivities</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">,</span> options2<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><h2 id="calling-activities-asynchronously"><a href="#calling-activities-asynchronously" class="header-anchor">#</a> Calling Activities Asynchronously</h2> <p>Sometimes :workflow:workflows: need to perform certain operations in parallel.
The <code>Async</code> class static methods allow you to invoke any :activity: asynchronously. The calls return a <code>Promise</code> result immediately.
<code>Promise</code> is similar to both Java <code>Future</code> and <code>CompletionStage</code>. The <code>Promise</code> <code>get</code> blocks until a result is available.
It also exposes the <code>thenApply</code> and <code>handle</code> methods. See the <code>Promise</code> JavaDoc for technical details about differences with <code>Future</code>.</p> <p>To convert a synchronous call:</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token class-name">String</span> localName <span class="token operator">=</span> activities<span class="token punctuation">.</span><span class="token function">download</span><span class="token punctuation">(</span>sourceBucket<span class="token punctuation">,</span> sourceFile<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>To asynchronous style, the method reference is passed to <code>Async.function</code> or <code>Async.procedure</code>
followed by :activity: arguments:</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token class-name">Promise</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">&gt;</span></span> localNamePromise <span class="token operator">=</span> <span class="token class-name">Async</span><span class="token punctuation">.</span><span class="token function">function</span><span class="token punctuation">(</span>activities<span class="token operator">::</span><span class="token function">download</span><span class="token punctuation">,</span> sourceBucket<span class="token punctuation">,</span> sourceFile<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>Then to wait synchronously for the result:</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token class-name">String</span> localName <span class="token operator">=</span> localNamePromise<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>Here is the above example rewritten to call download and upload in parallel on multiple files:</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">processFile</span><span class="token punctuation">(</span><span class="token class-name">Arguments</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Promise</span><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">&gt;</span><span class="token punctuation">&gt;</span></span> localNamePromises <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ArrayList</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">&gt;</span></span> processedNames <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
    <span class="token keyword">try</span> <span class="token punctuation">{</span>
        <span class="token comment">// Download all files in parallel.</span>
        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token class-name">String</span> sourceFilename <span class="token operator">:</span> args<span class="token punctuation">.</span><span class="token function">getSourceFilenames</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token class-name">Promise</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">&gt;</span></span> localName <span class="token operator">=</span> <span class="token class-name">Async</span><span class="token punctuation">.</span><span class="token function">function</span><span class="token punctuation">(</span>activities<span class="token operator">::</span><span class="token function">download</span><span class="token punctuation">,</span>
                args<span class="token punctuation">.</span><span class="token function">getSourceBucketName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> sourceFilename<span class="token punctuation">)</span><span class="token punctuation">;</span>
            localNamePromises<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>localName<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token comment">// allOf converts a list of promises to a single promise that contains a list</span>
        <span class="token comment">// of each promise value.</span>
        <span class="token class-name">Promise</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">List</span><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">&gt;</span><span class="token punctuation">&gt;</span></span> localNamesPromise <span class="token operator">=</span> <span class="token class-name">Promise</span><span class="token punctuation">.</span><span class="token function">allOf</span><span class="token punctuation">(</span>localNamePromises<span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token comment">// All code until the next line wasn't blocking.</span>
        <span class="token comment">// The promise get is a blocking call.</span>
        <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">&gt;</span></span> localNames <span class="token operator">=</span> localNamesPromise<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        processedNames <span class="token operator">=</span> activities<span class="token punctuation">.</span><span class="token function">processFiles</span><span class="token punctuation">(</span>localNames<span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token comment">// Upload all results in parallel.</span>
        <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Promise</span><span class="token punctuation">&lt;</span><span class="token class-name">Void</span><span class="token punctuation">&gt;</span><span class="token punctuation">&gt;</span></span> uploadedList <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ArrayList</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token class-name">String</span> processedName <span class="token operator">:</span> processedNames<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token class-name">Promise</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Void</span><span class="token punctuation">&gt;</span></span> uploaded <span class="token operator">=</span> <span class="token class-name">Async</span><span class="token punctuation">.</span><span class="token function">procedure</span><span class="token punctuation">(</span>activities<span class="token operator">::</span><span class="token function">upload</span><span class="token punctuation">,</span>
                args<span class="token punctuation">.</span><span class="token function">getTargetBucketName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> args<span class="token punctuation">.</span><span class="token function">getTargetFilename</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> processedName<span class="token punctuation">)</span><span class="token punctuation">;</span>
            uploadedList<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>uploaded<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token comment">// Wait for all uploads to complete.</span>
        <span class="token class-name">Promise</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token operator">?</span><span class="token punctuation">&gt;</span></span> allUploaded <span class="token operator">=</span> <span class="token class-name">Promise</span><span class="token punctuation">.</span><span class="token function">allOf</span><span class="token punctuation">(</span>uploadedList<span class="token punctuation">)</span><span class="token punctuation">;</span>
        allUploaded<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// blocks until all promises are ready.</span>
    <span class="token punctuation">}</span> <span class="token keyword">finally</span> <span class="token punctuation">{</span>
        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token class-name">Promise</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">&gt;</span></span> localNamePromise <span class="token operator">:</span> localNamePromises<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token comment">// Skip files that haven't completed downloading.</span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span>localNamePromise<span class="token punctuation">.</span><span class="token function">isCompleted</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                activities<span class="token punctuation">.</span><span class="token function">deleteLocalFile</span><span class="token punctuation">(</span>localNamePromise<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>processedNames <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token class-name">String</span> processedName <span class="token operator">:</span> processedNames<span class="token punctuation">)</span> <span class="token punctuation">{</span>
                activities<span class="token punctuation">.</span><span class="token function">deleteLocalFile</span><span class="token punctuation">(</span>processedName<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><h2 id="child-workflows"><a href="#child-workflows" class="header-anchor">#</a> Child Workflows</h2> <p>Besides :activity:activities:, a :workflow: can also orchestrate other :workflow:workflows:.</p> <p><code>Workflow.newChildWorkflowStub</code> returns a client-side stub that implements a child :workflow: interface.
It takes a child :workflow: type and optional child :workflow: options as arguments. :workflow:Workflow: options may be needed to override
the timeouts and :task_list: if they differ from the ones defined in the <code>@WorkflowMethod</code> annotation or parent :workflow:.</p> <p>The first call to the child :workflow: stub must always be to a method annotated with <code>@WorkflowMethod</code>. Similar to :activity:activities:, a call
can be made synchronous or asynchronous by using <code>Async#function</code> or <code>Async#procedure</code>. The synchronous call blocks until a child :workflow: completes. The asynchronous call
returns a <code>Promise</code> that can be used to wait for the completion. After an async call returns the stub, it can be used to send :signal:signals: to the child
by calling methods annotated with <code>@SignalMethod</code>. :query:Querying: a child :workflow: by calling methods annotated with <code>@QueryMethod</code>
from within :workflow: code is not supported. However, :query:queries: can be done from :activity:activities:
using the provided <code>WorkflowClient</code> stub.</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">GreetingChild</span> <span class="token punctuation">{</span>
   <span class="token annotation punctuation">@WorkflowMethod</span>
   <span class="token class-name">String</span> <span class="token function">composeGreeting</span><span class="token punctuation">(</span><span class="token class-name">String</span> greeting<span class="token punctuation">,</span> <span class="token class-name">String</span> name<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">class</span> <span class="token class-name">GreetingWorkflowImpl</span> <span class="token keyword">implements</span> <span class="token class-name">GreetingWorkflow</span> <span class="token punctuation">{</span>

   <span class="token annotation punctuation">@Override</span>
   <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">getGreeting</span><span class="token punctuation">(</span><span class="token class-name">String</span> name<span class="token punctuation">)</span> <span class="token punctuation">{</span>
       <span class="token class-name">GreetingChild</span> child <span class="token operator">=</span> <span class="token class-name">Workflow</span><span class="token punctuation">.</span><span class="token function">newChildWorkflowStub</span><span class="token punctuation">(</span><span class="token class-name">GreetingChild</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

       <span class="token comment">// This is a blocking call that returns only after child has completed.</span>
       <span class="token keyword">return</span> child<span class="token punctuation">.</span><span class="token function">composeGreeting</span><span class="token punctuation">(</span><span class="token string">&quot;Hello&quot;</span><span class="token punctuation">,</span> name <span class="token punctuation">)</span><span class="token punctuation">;</span>
   <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>Running two children in parallel:</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">class</span> <span class="token class-name">GreetingWorkflowImpl</span> <span class="token keyword">implements</span> <span class="token class-name">GreetingWorkflow</span> <span class="token punctuation">{</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">getGreeting</span><span class="token punctuation">(</span><span class="token class-name">String</span> name<span class="token punctuation">)</span> <span class="token punctuation">{</span>

        <span class="token comment">// Workflows are stateful, so a new stub must be created for each new child.</span>
        <span class="token class-name">GreetingChild</span> child1 <span class="token operator">=</span> <span class="token class-name">Workflow</span><span class="token punctuation">.</span><span class="token function">newChildWorkflowStub</span><span class="token punctuation">(</span><span class="token class-name">GreetingChild</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">Promise</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">&gt;</span></span> greeting1 <span class="token operator">=</span> <span class="token class-name">Async</span><span class="token punctuation">.</span><span class="token function">function</span><span class="token punctuation">(</span>child1<span class="token operator">::</span><span class="token function">composeGreeting</span><span class="token punctuation">,</span> <span class="token string">&quot;Hello&quot;</span><span class="token punctuation">,</span> name<span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token comment">// Both children will run concurrently.</span>
        <span class="token class-name">GreetingChild</span> child2 <span class="token operator">=</span> <span class="token class-name">Workflow</span><span class="token punctuation">.</span><span class="token function">newChildWorkflowStub</span><span class="token punctuation">(</span><span class="token class-name">GreetingChild</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">Promise</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">&gt;</span></span> greeting2 <span class="token operator">=</span> <span class="token class-name">Async</span><span class="token punctuation">.</span><span class="token function">function</span><span class="token punctuation">(</span>child2<span class="token operator">::</span><span class="token function">composeGreeting</span><span class="token punctuation">,</span> <span class="token string">&quot;Bye&quot;</span><span class="token punctuation">,</span> name<span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token comment">// Do something else here.</span>
        <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
        <span class="token keyword">return</span> <span class="token string">&quot;First: &quot;</span> <span class="token operator">+</span> greeting1<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">&quot;, second: &quot;</span> <span class="token operator">+</span> greeting2<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>To send a :signal: to a child, call a method annotated with <code>@SignalMethod</code>:</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">GreetingChild</span> <span class="token punctuation">{</span>
    <span class="token annotation punctuation">@WorkflowMethod</span>
    <span class="token class-name">String</span> <span class="token function">composeGreeting</span><span class="token punctuation">(</span><span class="token class-name">String</span> greeting<span class="token punctuation">,</span> <span class="token class-name">String</span> name<span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token annotation punctuation">@SignalMethod</span>
    <span class="token keyword">void</span> <span class="token function">updateName</span><span class="token punctuation">(</span><span class="token class-name">String</span> name<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">class</span> <span class="token class-name">GreetingWorkflowImpl</span> <span class="token keyword">implements</span> <span class="token class-name">GreetingWorkflow</span> <span class="token punctuation">{</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">getGreeting</span><span class="token punctuation">(</span><span class="token class-name">String</span> name<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">GreetingChild</span> child <span class="token operator">=</span> <span class="token class-name">Workflow</span><span class="token punctuation">.</span><span class="token function">newChildWorkflowStub</span><span class="token punctuation">(</span><span class="token class-name">GreetingChild</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">Promise</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">&gt;</span></span> greeting <span class="token operator">=</span> <span class="token class-name">Async</span><span class="token punctuation">.</span><span class="token function">function</span><span class="token punctuation">(</span>child<span class="token operator">::</span><span class="token function">composeGreeting</span><span class="token punctuation">,</span> <span class="token string">&quot;Hello&quot;</span><span class="token punctuation">,</span> name<span class="token punctuation">)</span><span class="token punctuation">;</span>
        child<span class="token punctuation">.</span><span class="token function">updateName</span><span class="token punctuation">(</span><span class="token string">&quot;Cadence&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> greeting<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>Calling methods annotated with <code>@QueryMethod</code> is not allowed from within :workflow: code.</p> <h2 id="workflow-implementation-constraints"><a href="#workflow-implementation-constraints" class="header-anchor">#</a> Workflow Implementation Constraints</h2> <p>Cadence uses the <a href="https://docs.microsoft.com/en-us/azure/architecture/patterns/event-sourcing" target="_blank" rel="noopener noreferrer">Microsoft Azure Event Sourcing pattern<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> to recover
the state of a :workflow: object including its threads and local variable values.
In essence, every time a :workflow: state has to be restored, its code is re-executed from the beginning. When replaying, side
effects (such as :activity: invocations) are ignored because they are already recorded in the :workflow: :event_history:.
When writing :workflow: logic, the replay is not visible, so the code should be written since it executes only once.
This design puts the following constraints on the :workflow: implementation:</p> <ul><li>Do not use any mutable global variables because multiple instances of :workflow:workflows: are executed in parallel.</li> <li>Do not call any non-deterministic functions like non seeded random or UUID.randomUUID() directly from the :workflow: code.</li></ul> <p>Always do the following in :activity:activities::</p> <ul><li>Don’t perform any IO or service calls as they are not usually deterministic. Use :activity:activities: for this.</li> <li>Only use <code>Workflow.currentTimeMillis()</code> to get the current time inside a :workflow:.</li> <li>Do not use native Java <code>Thread</code> or any other multi-threaded classes like <code>ThreadPoolExecutor</code>. Use <code>Async.function</code> or <code>Async.procedure</code>
to execute code asynchronously.</li> <li>Don't use any synchronization, locks, and other standard Java blocking concurrency-related classes besides those provided
by the Workflow class. There is no need in explicit synchronization because multi-threaded code inside a :workflow: is
executed one thread at a time and under a global lock.
<ul><li>Call <code>WorkflowThread.sleep</code> instead of <code>Thread.sleep</code>.</li> <li>Use <code>Promise</code> and <code>CompletablePromise</code> instead of <code>Future</code> and <code>CompletableFuture</code>.</li> <li>Use <code>WorkflowQueue</code> instead of <code>BlockingQueue</code>.</li></ul></li> <li>Use <code>Workflow.getVersion</code> when making any changes to the :workflow: code. Without this, any deployment of updated :workflow: code
might break already open :workflow:workflows:.</li> <li>Don’t access configuration APIs directly from a :workflow: because changes in the configuration might affect a :workflow_execution: path.
Pass it as an argument to a :workflow: function or use an :activity: to load it.</li></ul> <p>:workflow:Workflow: method arguments and return values are serializable to a byte array using the provided
<a href="https://static.javadoc.io/com.uber.cadence/cadence-client/2.4.1/index.html?com/uber/cadence/converter/DataConverter.html" target="_blank" rel="noopener noreferrer">DataConverter<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>
interface. The default implementation uses JSON serializer, but you can use any alternative serialization mechanism.</p> <p>The values passed to :workflow:workflows: through invocation parameters or returned through a result value are recorded in the execution history.
The entire execution history is transferred from the Cadence service to :workflow_worker:workflow_workers: with every :event: that the :workflow: logic needs to process.
A large execution history can thus adversely impact the performance of your :workflow:.
Therefore, be mindful of the amount of data that you transfer via :activity: invocation parameters or return values.
Otherwise, no additional limitations exist on :activity: implementations.</p></div> <footer class="page-edit"><!----> <!----></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/docs/java-client/workflow-interface/" class="prev">
        Workflow interface
      </a></span> <span class="next"><a href="/docs/java-client/starting-workflow-executions/">
        Starting workflows
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"><!----><div class="reading-progress top" data-v-21b39eda><div class="progress" data-v-21b39eda></div></div></div></div>
    <script src="/assets/js/app.e0d7f476.js" defer></script><script src="/assets/js/2.dd3d8628.js" defer></script><script src="/assets/js/37.099e6b5f.js" defer></script>
  </body>
</html>
